# ElizaOS Developer Update â€“ Week of Sept 8-11, 2025

## Core Framework

The ElizaOS architecture is seeing major refactoring efforts aimed at improving modularity and reducing redundancy:

- **Sentry Integration Refactoring**: Successfully removed Sentry browser SDK from the core package and added it to the server package ([PR #5961](https://github.com/elizaOS/eliza/pull/5961)). This change reduces the core package size and prevents browser incompatibility issues.

- **Message Bus Architecture**: Significant cleanup of the messagebus class is underway, along with plans to consolidate server/channel/world/room abstractions from 4 concepts to 2 ([PR #5957](https://github.com/elizaOS/eliza/pull/5957)). This will improve system maintainability and performance.

- **Backend Runs Tracking**: Implemented comprehensive backend tracking functionality across server/core/bootstrap/api-client components ([PR #5953](https://github.com/elizaOS/eliza/pull/5953)), enabling structured logging and enhanced observability.

- **Confidential Computing**: Agent Joshua demonstrated TEE-based account management using dstack SDK, now running in a Confidential Virtual Machine (CVM) to test in production TEE environments.

- **Browser Support**: Significant progress on browser compatibility for AgentRuntime, with issue #5958 now tracking full browser support implementation.

## New Features

### PGLite WASM Browser DB
A new browser database implementation is in development to enable full AgentRuntime functionality in browser environments:

```typescript
// BrowserDatabaseAdapter implementation (coming soon)
class BrowserDatabaseAdapter implements DatabaseAdapter {
  async initialize(): Promise<void> {
    // Uses IndexedDB/localStorage for persistent storage
    await this.db.open();
  }

  async query<T>(sql: string, params?: any[]): Promise<T[]> {
    // Execute SQL against browser-compatible storage
    return this.db.query(sql, params);
  }
}
```

### ElizaOS/React Hooks
New React hooks will simplify integration with ElizaOS in frontend applications:

```typescript
// Coming soon in @elizaos/react
import { useAgent, useAgentChat, useAgentActions } from '@elizaos/react';

function MyComponent() {
  const { agent, isLoading } = useAgent('my-agent-id');
  const { messages, sendMessage } = useAgentChat(agent);
  const { executeAction } = useAgentActions(agent);
  
  return (
    <div>
      {messages.map(msg => <div>{msg.content}</div>)}
      <button onClick={() => sendMessage('Hello agent!')}>
        Send Message
      </button>
    </div>
  );
}
```

### Dynamic Prompting for Scenarios
Recently merged support for multi-turn conversations in ElizaOS scenarios ([PR #5824](https://github.com/elizaOS/eliza/pull/5824)) enables sophisticated testing of agent behavior with LLM-simulated user responses:

```yaml
# Example conversation scenario
run:
  - input: "I need help with something"
    conversation:
      max_turns: 4
      user_simulator:
        persona: "polite customer with a billing question"
        objective: "find out why charged twice this month"
      final_evaluations:
        - type: "user_satisfaction"
          satisfaction_threshold: 0.7
```

### Enhanced Knowledge Systems
Work is underway on improving Eliza's question answering capabilities, with development focused on more efficient knowledge retrieval and contextualization.

## Bug Fixes

### MessageBusService Issue
Users reported problems with ElizaOS v1.5.5 related to MessageBusService being unable to map room/world to central IDs:

```
Error: MessageBusService cannot map room/world to central ID
```

This issue has been resolved in v1.5.7 and v1.5.8. Users experiencing this problem should upgrade to the latest version.

### Image Generation in Discord
Fixed a critical bug preventing generated images from appearing in Discord channels ([PR #5861](https://github.com/elizaOS/eliza/pull/5861)). The fix properly handles image attachments in Discord messages.

### Environment Variable Handling
Resolved an issue where quoted environment variables were not being properly parsed:

```typescript
// Before: Problematic env var parsing with quotes
process.env.OPENAI_API_KEY = '"sk-1234567890"'; // Quotes cause parsing errors

// After: Proper handling of quoted values
const apiKey = process.env.OPENAI_API_KEY?.replace(/^"|"$/g, '');
```

### Logger Improvements
Fixed issues with the LOG_JSON_FORMAT setting ([PR #5885](https://github.com/elizaOS/eliza/pull/5885)) and improved logging output for better readability and debugging ([PR #5849](https://github.com/elizaOS/eliza/pull/5849)).

## API Changes

### Client Debugging and React Version Handling
Enhanced client-side debugging capabilities with improved sourcemaps and React version management ([PR #5962](https://github.com/elizaOS/eliza/pull/5962)):

```javascript
// New Vite configuration for better debugging
export default defineConfig({
  build: {
    sourcemap: true,
    minify: 'esbuild',
    rollupOptions: {
      output: {
        manualChunks: {
          react: ['react', 'react-dom'],
        },
      },
    },
  },
  // Preserve function names for better stack traces
  esbuild: {
    keepNames: true,
  },
});
```

### Action Notification Improvements
Fixed notification behavior for client chat messages ([PR #5957](https://github.com/elizaOS/eliza/pull/5957)), ensuring actions are only displayed for client_chat messages.

### URL Synchronization for DM Channels
Added support for URL synchronization when switching between direct message channels ([PR #5941](https://github.com/elizaOS/eliza/pull/5941)), allowing users to bookmark and share direct links to specific conversations.

## Social Media Integrations

### Eliza Improvement Proposals
Discussions are underway to implement a structured proposal system similar to Ethereum's EIPs/ERCs to standardize development efforts and increase community involvement. This would help:

- Create a framework for documenting and tracking proposals
- Standardize development efforts across the ecosystem
- Facilitate more structured community participation

### X (Twitter) Lawsuit
The ongoing lawsuit with X (Twitter) continues to limit ElizaOS's presence on the platform. Community members are encouraged to join the official Discord server for the latest updates and discussions.

## Model Provider Updates

### Nemotron Model Provider Change
The nvidia/nemotron-nano-9b-v2 model is moving to nvidia/nemotron-nano-9b-v2:free, with DeepInfra becoming a paid provider. Applications using this model should update their configuration:

```diff
- MODEL_NAME=nvidia/nemotron-nano-9b-v2
+ MODEL_NAME=nvidia/nemotron-nano-9b-v2:free
```

### Sentry Vercel AI Integration
Added integration between Sentry and Vercel AI ([PR #5963](https://github.com/elizaOS/eliza/pull/5963)) for improved monitoring and error tracking for deployments on Vercel.

## Breaking Changes

### V1 to V2 Migration: Core Architecture
The ongoing transition from V1 to V2 includes several architectural changes:

1. **CLI Refactoring**: A major CLI overhaul is underway ([Issue #5860](https://github.com/elizaOS/eliza/issues/5860)) to simplify complexity and centralize business logic within the server package.

2. **Sentry Removal from Core**: Sentry has been removed from the core package ([PR #5961](https://github.com/elizaOS/eliza/pull/5961)). Applications that rely on Sentry integration should update their dependencies to use the server package instead.

3. **Runtime Changes**: Significant runtime cleanups are in progress, including changes to how plugins are registered and initialized.

These changes improve the overall architecture but may require updates to applications built on earlier versions. Detailed migration guides will be provided in upcoming releases.