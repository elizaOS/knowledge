# ElizaOS Developer Update - May 11-17, 2025

## 1. Core Framework

The ElizaOS framework saw significant architectural improvements this week, enhancing both stability and flexibility:

- **Plugin Architecture Overhaul**: The team has prepared the 0.x plugin system for compatibility with 1.x, enabling a more modular ecosystem with enhanced standardization ([#4384](https://github.com/elizaos/eliza/pull/4384))
- **Improved Message Processing**: Enhanced the message handler with an event-driven, asynchronous flow for better performance and reliability ([#4594](https://github.com/elizaos/eliza/pull/4594))
- **Agent Runtime Refinements**: Refactored model handling in AgentRuntime to support provider selection and priority settings, offering more flexibility in AI provider selection ([#4507](https://github.com/elizaos/eliza/pull/4507))
- **Database Isolation**: Database directories are now created and managed on a per-project basis, significantly improving isolation between projects ([#4423](https://github.com/elizaos/eliza/pull/4423), [#4497](https://github.com/elizaos/eliza/pull/4497))

A major cleanup effort removed several plugins from the monorepo (including Anthropic, OpenAI, Groq, Redis, Venice, and Ollama), moving toward a more extensible plugin architecture where these services exist as independent packages.

## 2. New Features

### Third-Party Plugin Support

ElizaOS now supports direct installation of plugins from git repositories:

```bash
# Install a plugin from a GitHub repository
elizaos plugins install https://github.com/username/plugin-example

# Shorthand format also supported
elizaos plugins install username/plugin-example
```

The plugin system now detects the correct install tag (alpha, beta, or stable) automatically ([#4568](https://github.com/elizaos/eliza/pull/4568), [#4577](https://github.com/elizaos/eliza/pull/4577)).

### Twitter Timeline Integration

A new timeline.ts module has been added to handle bot interactions with the Twitter timeline:

```javascript
// Enable Twitter timeline in your agent configuration
{
  "settings": {
    "twitter": {
      "enable_timeline_search": true,
      "enable_replies": true,
      "enable_follow_thanks": true,
      "enable_auto_retweet": false
    }
  }
}
```

To enable timeline functionality, configure the `ENABLE_TWITTER_TIMELINE` environment variable ([#4429](https://github.com/elizaos/eliza/pull/4429)).

### Faster Agent Response

The reply action now uses smaller models for faster responses. Additionally, the action now skips LLM calls when existing REPLY responses are found, dramatically improving response time ([#4416](https://github.com/elizaos/eliza/pull/4416), [#4608](https://github.com/elizaos/eliza/pull/4608)).

```javascript
// Example of optimized reply functionality
const replyAction = {
  type: "REPLY",
  text: "Hello! How can I help you today?",
  /* Other fields preserved from LLM response */
};
```

## 3. Bug Fixes

### LLM Response Parsing

Fixed a critical issue in how LLM responses were parsed. Previously, the system reduced responses to a fixed set of keys, discarding useful custom fields returned by custom templates. The fix now preserves all fields in the LLM response:

```javascript
// Before: Custom fields were dropped
const reducedResponse = { type, text };

// After: All fields are preserved
const preservedResponse = { type, text, ...otherFields };
```

This change significantly improves the flexibility of custom templates ([#4580](https://github.com/elizaos/eliza/pull/4580)).

### JSON Serialization in Logs

Addressed a critical bug in pglite where JSON serialization failed due to invalid Unicode escape sequences:

```
error: unsupported Unicode escape sequence
    at ye.Ve (file:///workspaces/.../dist/chunk-EADU5A67.js:1:17602)
```

The fix makes logging more robust by handling malformed Unicode escape sequences properly ([#4458](https://github.com/elizaos/eliza/pull/4458)).

### Agent Deletion Constraint Violation

Fixed a foreign key constraint violation that occurred when trying to delete agents that had participated in rooms:

```
ERROR: update or delete on table "agents" violates foreign key constraint "rooms_agents_id_fk" on table "rooms_agents"
```

The fix ensures proper cleanup of all related records when deleting an agent ([#4510](https://github.com/elizaos/eliza/pull/4510)).

## 4. API Changes

### Plugin Routes API

Plugin routes are now properly accessible via standardized API endpoints:

```
/api/agents/AGENT_UUID_OR_NAME/plugins/PLUGIN_NAME/ROUTE_FROM_PLUGIN
```

This makes it easier for plugins to expose their own API routes that can be called from external applications ([#4415](https://github.com/elizaos/eliza/pull/4415)).

### Authentication Middleware

Added proper API key authentication middleware with a dialog for unauthorized access, enhancing security while providing better user feedback ([#4420](https://github.com/elizaos/eliza/pull/4420)).

### Custom Embedding Endpoint Support

Extended the OpenAI plugin to support custom embedding endpoints, allowing for more flexible deployment scenarios:

```
OPENAI_EMBEDDING_API_URL=https://your-custom-embedding-service.com/v1
```

This is particularly useful for self-hosted embeddings or when using different providers for completions and embeddings ([#4421](https://github.com/elizaos/eliza/pull/4421)).

## 5. Social Media Integrations

### Twitter Plugin Improvements

The Twitter plugin received substantial improvements:

- Added timeline functionality for bot interactions with proper configuration controls ([#4429](https://github.com/elizaos/eliza/pull/4429))
- Fixed tweet media generation and enabled tweet-with-media functionality ([#4241](https://github.com/elizaos/eliza/issue/4241))
- Addressed Twitter space functionality issues ([#4180](https://github.com/elizaos/eliza/issue/4180))
- Implemented Twitter interaction reactions ([#4181](https://github.com/elizaos/eliza/issue/4181))
- Improved error handling throughout the Twitter plugin ([#4506](https://github.com/elizaos/eliza/pull/4506))

### Discord Integration Fixes

Fixed the Discord service to properly handle timeouts during unregistration, preventing errors when deleting an agent ([#4450](https://github.com/elizaos/eliza/pull/4450)).

## 6. Model Provider Updates

### Model Usage Tracking

Enhanced model usage tracking for embeddings and image descriptions in the OpenAI plugin, providing better insights into API usage and costs ([#4438](https://github.com/elizaos/eliza/pull/4438)).

### TEXT_EMBEDDING Handler

Fixed an issue where the TEXT_EMBEDDING delegate type was not finding a proper handler, resolving a common error in knowledge embedding operations:

```
Error: No handler found for delegate type: TEXT_EMBEDDING
```

This fix ensures proper operation of embedding functions across the platform ([#4537](https://github.com/elizaos/eliza/pull/4537)).

### Local Models Support

Improved local AI model configuration, replacing StudioLM-specific instructions with more comprehensive guides for llama.cpp integration, focusing on better local model support ([#4459](https://github.com/elizaos/eliza/pull/4459)).

## 7. Breaking Changes

### CLI Command Consolidation

The `update-cli` functionality has been merged into the main `update` command to streamline the user experience. If you were using the separate update-cli command, you'll need to switch to the unified command:

```bash
# Old way (no longer works)
elizaos update-cli

# New way
elizaos update --cli
```

This change is part of broader CLI improvements ensuring better version detection and package management ([#4592](https://github.com/elizaos/eliza/pull/4592)).

### Plugin System Migration

With the removal of several plugins from the monorepo, you'll need to explicitly install these plugins if your agents depend on them:

```bash
# Example: Installing the OpenAI plugin separately
elizaos plugins install @elizaos/plugin-openai

# Example: Installing from GitHub
elizaos plugins install elizaos-plugins/plugin-openai
```

This change supports the move toward a more modular ecosystem where plugins exist as independent packages ([#4406](https://github.com/elizaos/eliza/pull/4406), [#4511](https://github.com/elizaos/eliza/pull/4511)).

See the updated documentation at [docs.eliza.how](https://docs.eliza.how/) for detailed migration guides.