# ElizaOS Developer Update - Week of 2025-09-01 to 2025-09-06

## 1. Core Framework

This week brought significant architectural changes to ElizaOS, with a major refactoring effort to centralize business logic and improve the framework's structure:

- **Architecture Refactoring**: Started work on moving business logic from the CLI package to a new `@eliza/server` package ([PR #5864](https://github.com/elizaos/eliza/pull/5864)), creating a cleaner separation between core components, server functionality, and CLI consumers.
  
- **ElizaOS Orchestration**: Introduced a new unified `ElizaOS` orchestration class that centralizes agent lifecycle, plugin loading, and configuration management, removing 1,600+ lines of redundant code while maintaining backward compatibility.

- **Runtime Improvements**: Enhanced the runtime with better action lifecycle tracking and real-time event broadcasting, supporting new features like action visualization in the UI ([PR #5865](https://github.com/elizaos/eliza/pull/5865)).

- **Logging System Overhaul**: Fixed JSON format logging ([PR #5885](https://github.com/elizaos/eliza/pull/5885)) and improved console output throughout the build and dev processes to be more concise and readable ([PR #5881](https://github.com/elizaos/eliza/pull/5881)).

## 2. New Features

### Dynamic Prompting for Scenarios

A major feature landed this week with the implementation of Dynamic Prompting (multi-turn conversations) in ElizaOS scenarios ([PR #5824](https://github.com/elizaos/eliza/pull/5824)):

```yaml
run:
  - input: "I need help with something"
    conversation:
      max_turns: 4
      user_simulator:
        persona: "polite customer with a billing question"
        objective: "find out why charged twice this month"
        temperature: 0.6
      final_evaluations:
        - type: "llm_judge"
          prompt: "Did the agent successfully help resolve the billing issue?"
          expected: "yes"
```

This feature enables sophisticated testing of agent behavior through extended conversations where an LLM simulates realistic user responses, while maintaining 100% backward compatibility with existing scenarios.

### Real-time Action Visualization

Added a comprehensive real-time action execution UI system that provides transparency into agent actions ([PR #5865](https://github.com/elizaos/eliza/pull/5865)):

```typescript
// Component usage in chat interface
<ActionTool 
  action={actionData.action}
  input={actionData.input}
  output={actionData.output}
  status={actionData.status}
  error={actionData.error}
/>
```

Users can now see actions as they happen, with detailed input/output data, status tracking, and error handling - all updated in real-time through WebSocket connections.

### Standalone CLI Chat Interface

Added a new standalone CLI chat interface with improved UX ([PR #5879](https://github.com/elizaos/eliza/pull/5879)):

```bash
# Run the standalone CLI chat
npx @elizaos/cli chat
```

This provides an interactive command-line experience similar to AI SDK's streamText but using ElizaOS runtime and plugins, with support for configuration via environment variables.

## 3. Bug Fixes

This week saw critical bug fixes that improve stability and user experience:

- **Discord Image Generation**: Fixed issue #5809 where generated images were visible in web UI but not appearing in Discord channels ([PR #5861](https://github.com/elizaos/eliza/pull/5861)).

- **Port Conflict Resolution**: Fixed port checking to automatically try port 3001 if 3000 is not available, resolving crashes when the default port is occupied ([PR #5883](https://github.com/elizaos/eliza/pull/5883), [PR #5876](https://github.com/elizaos/eliza/pull/5876)).

- **Excessive Error Logging**: Prevented excessive SECRET_SALT error logging during startup ([PR #5884](https://github.com/elizaos/eliza/pull/5884)).

- **Docker Support**: Added Docker files to project-starter template, enabling local project development, image creation, and cloud deployment ([PR #5858](https://github.com/elizaos/eliza/pull/5858)).

## 4. API Changes

### Plugin Development

Enhanced plugin development capabilities with new APIs for extending the ElizaOS platform:

```typescript
// Example of creating custom endpoints in a plugin
export const registerPlugin = (runtime) => {
  // Register custom API endpoints
  runtime.registerAction('CUSTOM_ACTION', async (params) => {
    // Implementation
    return { result: 'Success' };
  });
  
  // Create a worker that listens for events
  runtime.on('MESSAGE_RECEIVED', async (event) => {
    // React to messages
  });
};
```

Stan provided guidance on creating custom plugins without separate backends, explaining that developers can extend the existing API server, build custom workers that listen for events, and implement periodic data fetching.

### Breaking Changes

No breaking changes were introduced this week, with all architectural improvements maintaining backward compatibility. The major refactoring work (PR #5864) ensures the public API remains the same with all commands working identically.

## 5. Social Media Integrations

- **Farcaster Integration**: The Spartan agent for Farcaster is operational but needs tuning as it's currently producing repetitive responses.

- **Discord Improvements**: Enhanced Discord integration with image generation support, fixing a bug where generated images were visible in the web UI but not appearing in Discord channels.

- **x402 Protocol**: Ongoing discussions about x402, a protocol for managing API payments using crypto wallets instead of API keys, with potential for a dedicated x402 facilitator.

## 6. Model Provider Updates

Several significant model updates were announced this week:

- **Kimi K2 Upgrade**: New model with improved coding capabilities and 256k context length, enhancing agentic development capabilities.

- **Qwen3-Max Release**: Enhanced performance across math, coding, and multilingual tasks, providing better support for technical agents.

- **OpenRouter Integration**: Work continues on plugin-openrouter with PR #9 being reviewed, which will enable access to a broader range of models.

## 7. Breaking Changes

While no breaking changes were introduced this week, developers should be aware of ongoing architectural changes:

- The CLI refactoring (PR #5864) centralizes business logic in the server package, though backward compatibility is maintained.

- The versioning system has been updated where develop branch uses alpha versions (1.5.8-alpha.0) while main branch uses beta versions to ensure synchronization.

- The path to a V2 migration is being prepared with the ongoing architecture refactoring, which will provide a cleaner separation between core components and implementation details.

As ElizaOS development continues, teams should stay up-to-date with these foundational changes to ensure smooth migration when V2 is eventually released.