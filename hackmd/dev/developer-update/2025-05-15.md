# ElizaOS Developer Update (May 15, 2025)

## Core Framework

The ElizaOS framework has seen significant architecture improvements this week as we prepare for the upcoming v2 release. The plugin system has been substantially enhanced to improve cross-version compatibility between v0.x (v1) and v1.x (v2) codebases.

Key architectural changes:
- **Plugin specification standardization**: A new plugin specification submodule has been added to enforce consistent plugin development standards across the ecosystem.
- **Enhanced model handling**: AgentRuntime now supports dynamic provider selection and priority settings, giving developers more control over model selection logic.
- **Database improvements**: Entity relationship constraints have been fixed, resolving foreign key constraint violations on agent deletion.

```javascript
// New model provider selection pattern
const runtime = new AgentRuntime({
  providers: [
    { name: 'openai', priority: 10 },
    { name: 'anthropic', priority: 5 },
    { name: 'local', priority: 1 }
  ]
});
```

## New Features

### Third-Party Plugin Installation
We've added comprehensive support for third-party plugin installation with improved Git repository integration. Developers can now install plugins directly from external repositories using both HTTPS and shorthand formats:

```bash
# Install from HTTPS URL
elizaos plugin add https://github.com/developer/awesome-plugin.git

# Install using shorthand format
elizaos plugin add developer/awesome-plugin
```

### DAG Viewer Tool
A new Directed Acyclic Graph (DAG) viewer tool is in development, using react-flow as the underlying technology. This tool will allow visual creation and debugging of agent workflows, with support for:
- Agent state tracking and debug views
- Custom node types and conditional flows
- Circuit breakers and rate limiting between nodes
- Budget constraints to prevent resource spiraling

### LinkedIn Plugin
Work has begun on a LinkedIn plugin for ElizaOS, similar to the existing Twitter integration. This will expand social media capabilities for ElizaOS agents.

## Bug Fixes

Several critical bugs have been addressed this week:

1. **JSON Serialization in PGLite**: Fixed handling of invalid Unicode escape sequences in logs, preventing database corruption.
   
2. **Twitter Integration**: Resolved multiple issues with the Twitter plugin:
   - Fixed mention response functionality 
   - Improved error handling with configurable retry settings
   - Resolved issues with threading and scheduling of tweets

3. **Discord Plugin**: Fixed disappearing messages and implemented proper reply functionality.

4. **Knowledge Path Implementation**: Resolved issues with knowledge file referencing in character.json, ensuring correct relative path handling.

## API Changes

### Discord Plugin Extension
The recommended pattern for extending plugin functionality has been clarified. Developers should extend plugin classes directly rather than modifying service implementations:

```typescript
// Correct pattern for extending the Discord plugin
import { DiscordPlugin } from '@elizaos/plugin-discord';

export class MyCustomDiscordPlugin extends DiscordPlugin {
  override async sendMessage(message: string, channelId?: string): Promise<void> {
    // Custom implementation
    await super.sendMessage(message, channelId);
  }
}
```

### Character File Knowledge References
The API for referencing knowledge files in character.json has been standardized:
- Paths are relative to the characters/knowledge directory
- RAG knowledge is enabled by setting "ragknowledge: true" in character settings

```json
{
  "name": "ExpertAgent",
  "settings": {
    "ragknowledge": true
  },
  "knowledge": [
    "domain_expertise.md",
    "technical_reference.md"
  ]
}
```

## Social Media Integrations

### Twitter/X Integration
Significant improvements have been made to the Twitter integration:
- Enhanced error handling and configurable retry settings
- Fixed scheduling with consistent timing using TWITTER_POST_INTERVAL_MIN and TWITTER_POST_INTERVAL_MAX
- Improved mention handling and reply formatting

### Farcaster Integration
The Farcaster v2 plugin is now in testing. Note the naming convention differences:
- `plugin-twitter`: For ElizaOS v2/v1.x
- `client-twitter`: For ElizaOS v0.x

### Discord Integration
The Discord plugin has received several fixes:
- Proper reply functionality implementation
- Fixed formatting issues
- Resolved disappearing messages problem

## Model Provider Updates

### OpenAI Integration
- Added model usage events for embeddings and image description
- GPT-4o image generation is being integrated as part of the v2 release

### Local Model Support
- Fixed connection timeout errors when initializing local AI models
- Improved Ollama integration with better error handling

## Breaking Changes

Several breaking changes are important to note for v1 to v2 migration:

1. **Plugin Repository Restructuring**: Plugins have been moved to a separate repository (elizaos-plugins). Update your references accordingly.

2. **Package Naming Conventions**: 
   - v2/v1.x uses the `plugin-*` naming pattern
   - v0.x uses the `client-*` naming pattern

3. **Version Compatibility**: When upgrading, make sure to pin your dependencies:
   ```json
   {
     "dependencies": {
       "@elizaos/cli": "^1.0.0-beta.51",
       "@elizaos/core": "^1.0.0-beta.51"
     }
   }
   ```

4. **Character File Structure**: The character file structure has changed significantly in v2, especially regarding knowledge integration. Refer to the updated documentation.

ElizaOS v2 is currently in beta testing and represents a significant improvement over v1. Stay updated with the development progress on GitHub: https://github.com/elizaos/eliza