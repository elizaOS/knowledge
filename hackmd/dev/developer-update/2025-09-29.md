# ElizaOS Developer Update: September 23-29, 2025

## Core Framework

This week brought significant improvements to the ElizaOS runtime architecture, focusing on stability and robustness:

- **Idempotent Runtime Initialization**: PR [#6004](https://github.com/elizaOS/eliza/pull/6004) made runtime initialization idempotent and improved service registration coordination, removing legacy code paths and redundant type guards.

- **Settings Injection at Runtime Creation**: PR [#6008](https://github.com/elizaOS/eliza/pull/6008) fixed a critical race condition where settings were injected after runtime initialization, causing adapter creation failures and DB operations to fail:
  ```typescript
  // Before - problematic initialization sequence
  const runtime = new ElizaOS();
  runtime.injectSettings(settings); // Too late, adapter already failed

  // After - correct initialization
  const runtime = new ElizaOS({ settings });
  ```

- **Type Definition Refactoring**: PR [#5998](https://github.com/elizaOS/eliza/pull/5998) conducted a major overhaul of type definitions across the runtime system, improving type safety and developer experience.

## New Features

### Auto-Install for Missing Plugins

PR [#6006](https://github.com/elizaOS/eliza/pull/6006) introduced safe, on-demand plugin auto-installation for the server PluginLoader:

```typescript
// PluginInstaller.ts
export class PluginInstaller {
  async installPlugin(pluginId: string): Promise<boolean> {
    this.logger.info(`Installing plugin: ${pluginId}`);
    try {
      await this.bunExec(['add', `${pluginId}@${this.version || 'latest'}`]);
      return true;
    } catch (error) {
      this.logger.error(`Failed to install plugin ${pluginId}: ${error.message}`);
      return false;
    }
  }
}
```

### Improved Monorepo Environment Loading

PR [#6005](https://github.com/elizaOS/eliza/pull/6005) enhanced environment variable loading by implementing a monorepo-aware resolver:

```typescript
// Refined logic for including Ollama as a fallback LLM provider
const hasOtherProviders = Boolean(
  process.env.OPENAI_API_KEY || 
  process.env.ANTHROPIC_API_KEY || 
  process.env.OPENROUTER_API_KEY
);

// Only include Ollama when no other providers are configured
const plugins = [
  bootstrapPlugin,
  ...(hasOtherProviders ? [] : [ollamaPlugin]),
  // ... other plugins
];
```

## Bug Fixes

### Docker Build Stability

PR [#5997](https://github.com/elizaOS/eliza/pull/5997) stabilized Docker image builds in CI by:

- Pinning Bun to version 1.2.21
- Enabling Buildx with GitHub Actions cache
- Adding diagnostic tools and disk cleanup steps

### CLI Dev Command Improvements

PR [#5988](https://github.com/elizaOS/eliza/pull/5988) fixed dev mode port increment issues:

```typescript
// Wait for port to be free before server restart
async function waitForPortRelease(port: number, maxAttempts = 10): Promise<boolean> {
  for (let attempt = 0; attempt < maxAttempts; attempt++) {
    if (await isPortFree(port)) {
      return true;
    }
    await new Promise(resolve => setTimeout(resolve, 100));
  }
  return false;
}
```

### Infinite Restart Loop Prevention

PR [#5991](https://github.com/elizaOS/eliza/pull/5991) addressed an infinite restart loop in the CLI's dev command by adding recursion prevention:

```typescript
// Added check to prevent recursive execution
if (process.env.ELIZAOS_DEV_RECURSION_GUARD === 'true') {
  logger.warn('Preventing recursive dev server restart');
  return;
}
```

## API Changes

### Runtime Initialization API

The runtime initialization API has been updated to accept settings during construction rather than after:

```typescript
// Old approach (deprecated)
const runtime = new ElizaOS();
runtime.injectSettings(settings);

// New approach
const runtime = new ElizaOS({ settings });
```

### Plugin Loading Error Handling

PR [#6010](https://github.com/elizaOS/eliza/pull/6010) downgraded plugin import failures from error to warn level, as these failures are often recoverable through auto-installation:

```typescript
// Before
this.logger.error(`Import failed using ${strategy}: ${error.message}`);

// After
this.logger.warn(`Import failed using ${strategy}: ${error.message}`);
```

## Social Media Integrations

No significant changes were made to social media integrations this week. The community continues to discuss the upcoming AI16z to ElizaOS migration scheduled for October 6th, with clarifications that the migration doesn't impact DegenAI.

## Model Provider Updates

### Zod Dependency Upgrade

PR [#5994](https://github.com/elizaOS/eliza/pull/5994) resolved critical plugin loading issues by upgrading the Zod validation library to its latest major version:

```bash
# Issue with zod/v4 not loading in v1.5.10
Cannot find module 'zod/v4' from '/root/nimi-ai/node_modules/@elizaos/plugin-openrouter/node_modules/ai/dist/index.mjs'
```

This fix ensures compatibility with OpenRouter, OpenAI, and other AI model providers that depend on the latest Zod version.

## Breaking Changes: V1 to V2 Migration

The community is preparing for the AI16z to ElizaOS token migration on October 6th. This is not just a rebranding but involves technical improvements for cross-chain functionality, increased liquidity, and better exchange listings. The team is working directly with exchanges to facilitate the migration process.

Key migration notes:
- Token holders on CEXs should await detailed instructions in October
- The migration does not impact DegenAI tokens
- The team plans to use revenue from cloud services for token buybacks
- The long-term vision is to position ElizaOS as an agent network protocol token

If you're holding AI16z tokens, please stand by for the detailed migration guide which will be released in early October.