# ElizaOS Developer Update - Week of August 17-21, 2025

## 1. Core Framework

### Major Refactoring & Architecture Improvements
- **Sessions API**: Merged significant enhancement to Sessions API with timeout management, auto-renewal capabilities, and error handling ([PR #5799](https://github.com/elizaOS/eliza/pull/5799))
- **Cross-Environment Logger**: Refactored logger module to function seamlessly across both browser and Node.js environments, maintaining backward compatibility ([PR #5797](https://github.com/elizaOS/eliza/pull/5797))
- **Runtime Services Interface**: Added `getServiceLoadPromise` interface to runtime to improve service initialization tracking ([PR #5801](https://github.com/elizaOS/eliza/pull/5801))
- **Component Queries**: Updated component queries in `plugin-sql` to be more flexible, allowing for better date handling ([PR #5801](https://github.com/elizaOS/eliza/pull/5801))

### Breaking Changes (Deferred to v1.5)
The team has identified several code quality improvements that will require breaking changes, but these have been deferred to v1.5 to avoid disrupting plugins. Core developers are working on:
- Cleaning up function parameters by removing unnecessary 'runtime' parameters
- Fixing type inconsistencies between runtime.ts and base.ts implementations
- Consolidating duplicate DB functions

## 2. New Features

### Async Embedding Generation
- Implemented asynchronous embedding generation via a queue service, reducing response times by approximately 500ms ([PR #5793](https://github.com/elizaOS/eliza/pull/5793))

### Agent-DOM Integration
- Development underway on agent-DOM integration to boost CUA (Conversational User Agent) accuracy to 95%, improving the ability for agents to interact with web content

### Scenario Matrix Runner & Reporting System
- Completed and closed the entire Scenario Matrix Runner and Reporting System epic
- Implemented a new CLI tool for comprehensive, automated testing of agent behaviors across various configurations
- Added support for generating detailed performance reports in both HTML and PDF formats

### Clank Tank
A new AI-driven governance system being developed by Jin:
```javascript
// Example tokenomics integration
const clankTankSystem = {
  // Uses existing AI16z tokens (no separate token)
  tokenCurrency: 'AI16Z',
  
  // Application areas
  applications: [
    'hackathons',
    'partnershipApplications',
    'investmentDecisions',
    'grantDistributions'
  ],
  
  // AI-driven features
  features: {
    generateNewsFromActivity: async (discordActivity, githubActivity) => {
      // AI generates news shows based on community activity
    },
    decisionMaking: async (submissionData, communityVotes) => {
      // AI analyzes submissions with community input
    }
  }
};
```

## 3. Bug Fixes

### Critical Database Error Resolution
- Fixed entity creation SQL parameter mismatch that was causing database errors during entity creation ([PR #5791](https://github.com/elizaOS/eliza/pull/5791))
- Error message: "Failed query: insert into 'entities' values ($1, $2, default, default, default) params: [only 2 parameters provided]"

### GitHub Actions Test Failures
- Resolved multiple test failures in GitHub Actions CI pipeline ([PR #5792](https://github.com/elizaOS/eliza/pull/5792))
- Fixed plugin configuration bugs affecting test stability
- Enhanced XML parsing reliability in CI environment

### Publisher Module Improvements
- Fixed comma placement in `index.json` for more reliable plugin publishing ([PR #5796](https://github.com/elizaOS/eliza/pull/5796))
- Improved TypeScript safety for publisher module

### Plugin Support
- Added support for `plugin-mysql` before forcing `plugin-sql`, making plugin order less important ([PR #5718](https://github.com/elizaOS/eliza/pull/5718))
- Fixed Phala CLI argument handling and TEE starter Docker build ([PR #5773](https://github.com/elizaOS/eliza/pull/5773))

## 4. API Changes

### Sessions API Client
The Sessions API now provides a simplified interface for messaging between users and agents:

```typescript
// Creating a new session
const session = await client.sessions.create({
  agentId: "agent-uuid",
  userId: "user-uuid",
  metadata: { custom: "data" },
  timeoutSeconds: 300 // Optional timeout
});

// Sending a message in the session
const message = await client.sessions.sendMessage(session.id, {
  content: "Hello, agent!",
  type: "text"
});

// Retrieving session history
const messages = await client.sessions.getMessages(session.id);
```

### Enhanced Service Loading
New runtime API for tracking service loading state:

```typescript
// Get promise that resolves when a service is loaded
const loadPromise = runtime.getServiceLoadPromise('myService');
await loadPromise; // Wait for service to be loaded
console.log('Service is now available');
```

## 5. Social Media Integrations

### Twitter Plugin Rate Limiting
- Users experiencing 429 errors with the Twitter plugin despite having paid subscriptions
- Identified cases where Twitter apps were banned for policy violations
- Work is ongoing to implement proper handling of Twitter API rate limits in the plugin

### Community Relations
- Team addressed a situation with another project ("openservai") making potentially misleading statements about engineering leadership
- The other project removed the content after being contacted

## 6. Model Provider Updates

### OpenRouter API Announcements
Two new developer APIs have been announced:

```typescript
// Activity Analytics API for daily activity rollups
const dailyActivity = await openRouter.getActivityAnalytics({
  startDate: '2025-08-01',
  endDate: '2025-08-21',
  aggregation: 'daily'
});

// Allowed Models API for fetching models filtered by user preferences
const allowedModels = await openRouter.getAllowedModels({
  userProviderPreferences: ['openai', 'anthropic']
});
```

## 7. Breaking Changes

### V1 to V2 Migration Warning
While breaking changes have been deferred to v1.5, developers should prepare for the following upcoming changes:

1. **Runtime Parameter Removal**: Functions will no longer accept 'runtime' as a parameter since it's accessible via 'this'
2. **Type Consistency Updates**: Discrepancies between runtime.ts and base.ts implementations will be fixed
3. **Function Signature Changes**: Over-optionalized functions will be split into separate, more focused functions
4. **DB Function Consolidation**: Duplicate database functions will be consolidated

Documentation for these changes will be released prior to v1.5 to ensure a smooth transition.

### Knowledge Plugin Configuration Change
To customize chunk sizes in the knowledge plugin, you now need to modify the source code directly instead of using environment variables:

```bash
# Clone the plugin repository
git clone https://github.com/elizaOS/plugin-knowledge.git

# Modify the ctx-embeddings.ts file to adjust chunk sizes
# Build the plugin locally
# Use bun link to link it to your project
```

This change significantly improves document processing, with reports of chunk counts increasing from 29 to 100 in large documents.