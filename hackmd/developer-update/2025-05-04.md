# ElizaOS Developer Update: 2025-04-28 to 2025-05-04

## 1. Core Framework

The ElizaOS team has been making significant architectural changes as we continue the transition from V1 to V2. The most notable development is the plugin architecture restructuring, which now fully separates plugins from the core system to improve maintainability and flexibility.

Key changes to core framework:

- **Project Structure Separation**: The ElizaOS ecosystem now clearly delineates between multiple components (AI16Z, Auto.fun, ElizaOS v1/Eliza v2, DegenAI)
- **Cleaner Plugin Management**: Several plugins have been removed from the monorepo as part of our architectural restructuring effort, including EVM, browser, PDF, S3 storage, Ollama, Groq, Venice, and Anthropic plugins
- **Improved Runtime Stability**: Fixed ESM type declarations in Core [#4341](https://github.com/elizaos/eliza/pull/4341)

Critical issue identified in the TypeScript build:

```typescript
// Error in elizaos/core package
// Missing 'preconnect' property in fetch type definition
// This needs immediate attention as it's causing build failures
```

## 2. New Features

### Knowledge Management Enhancements

ElizaOS now supports scopable knowledge with improved RAG (Retrieval-Augmented Generation) implementation. This allows developers to better contextualize agent responses based on specific knowledge domains.

```typescript
// Example of using scopable knowledge in a character configuration
const characterConfig = {
  knowledge: [
    {
      id: "product-docs",
      scope: "product",
      source: "/path/to/documents"
    },
    {
      id: "user-data",
      scope: "personal",
      source: "postgresql://connection-string"
    }
  ]
};

// Knowledge can be accessed in character conversations with proper scoping
agent.useKnowledge("What are our product features?", { scope: "product" });
```

### Social Media Integrations

Twitter timeline functionality has been added [#4429](https://github.com/elizaos/eliza/pull/4429), enabling agents to process and interact with timeline data:

```typescript
// Example of using the Twitter timeline functionality
import { TwitterPlugin } from '@elizaos/plugin-twitter';

// Initialize the Twitter plugin
const twitter = new TwitterPlugin({
  apiKey: process.env.TWITTER_API_KEY,
  apiSecret: process.env.TWITTER_API_SECRET,
  // ... other credentials
});

// Get the user timeline
const timeline = await twitter.getTimeline({
  username: 'ElizaOS',
  count: 10
});

// Process tweets and generate responses
for (const tweet of timeline) {
  const response = await agent.generateResponse(`Reply to: ${tweet.text}`);
  await twitter.reply(tweet.id, response);
}
```

## 3. Bug Fixes

Several critical bugs have been addressed this week:

1. **Conversation History Disappearing**: Fixed issue where chat history was disappearing after 3-5 minutes of inactivity by implementing more robust session management
2. **Collabland Verification Issues**: Resolved persistent problems with role verification for token holders that had been ongoing for 48+ hours
3. **CLI Update Problems**: Fixed an issue where the CLI was reporting an older version despite successful installation of a newer version
4. **PostgreSQL Database Issues**: Resolved connection problems for Docker containers [#4363](https://github.com/elizaos/eliza/pull/4363)
5. **Security Vulnerability**: Patched a critical security flaw that allowed fake verified tokens to appear on the Auto.fun platform causing financial losses

Technical context for the CLI versioning fix:

```bash
# Previous problematic updating method
npm i -g @elizaos/cli@beta

# New recommended update process that resolves version conflicts
npm uninstall -g @elizaos/cli
npm cache clean --force
npm i -g @elizaos/cli@beta
```

## 4. API Changes

Several important API changes have been implemented:

1. **Authentication Middleware**: Added comprehensive authentication middleware with API key dialog for unauthorized access [#4420](https://github.com/elizaos/eliza/pull/4420)

2. **Model Configuration APIs**: Now support customization of default models through environment variables:

```javascript
// Change from Haiku to Sonnet model by setting in .env file
SMALL_ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
```

3. **Custom Embedding Endpoints**: Extended OpenAI plugin to support custom embedding endpoints [#4421](https://github.com/elizaos/eliza/pull/4421)

```typescript
// Example of using custom embedding endpoints
import { OpenAIPlugin } from '@elizaos/plugin-openai';

const openai = new OpenAIPlugin({
  apiKey: process.env.OPENAI_API_KEY,
  embeddingEndpoint: 'https://custom-embedding-service.com/embed',
  embeddingModel: 'custom-embedding-model'
});

const embeddings = await openai.getEmbeddings('Text to embed');
```

4. **Model/Plugin Name Logging**: Added improved logging for better tracking [#4394](https://github.com/elizaos/eliza/pull/4394)

## 5. Social Media Integrations

### Twitter Plugin Enhancements

The Twitter plugin has received several improvements:

- **Typing Indicator**: Added typing indicator to improve user experience [#4364](https://github.com/elizaos/eliza/pull/4364)
- **Timeline Functionality**: Implemented ability to fetch and process Twitter timelines [#4429](https://github.com/elizaos/eliza/pull/4429)
- **Reply Functionality**: Fixed issue where Twitter agent was only replying once to interactions on posts

### Discord Plugin Improvements

- **Typing Indicators**: Added typing indicators to match other platform plugins 
- **Role Verification**: Addressed persistent issues with Collabland role verification affecting DegenAI token holders

## 6. Model Provider Updates

### Anthropic Integration

- API key validation has been implemented for Anthropic plugin model calls [#4383](https://github.com/elizaos/eliza/pull/4383)
- The Anthropic plugin has been removed from the monorepo [#4427](https://github.com/elizaos/eliza/pull/4427) in line with our architectural redesign
- Added support for switching between Claude models through environment variables

### OpenAI Integration

- Extended the OpenAI plugin to support custom embedding endpoints [#4421](https://github.com/elizaos/eliza/pull/4421)
- Optimized model usage by configuring Reply to use small models [#4416](https://github.com/elizaos/eliza/pull/4416)

### Deepseek Integration

- Plans for Deepseek model integration in v2 are underway, with expected completion in the coming weeks

## 7. Breaking Changes

As we transition from V1 to V2, developers should be aware of these breaking changes:

1. **Plugin Structure**: The V2 architecture now separates plugins completely from the core system
   
2. **Branch Selection**: Use the `v2-develop` branch for new plugins; the `main` branch still refers to V1
   
3. **Project Initialization**: The initialization process has changed:

```bash
# V1 initialization (old)
npm create @elizaos/plugin-project

# V2 initialization (new)
elizaos create my-project
cd my-project
elizaos start
```

4. **Model Configuration**: Environment variable names have changed for model selection:

```
# V1 model configuration (deprecated)
ANTHROPIC_MODEL=claude-2

# V2 model configuration (new)
SMALL_ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
LARGE_ANTHROPIC_MODEL=claude-3-5-opus-20241022
```

5. **Multiple Plugins Removed**: Several plugins have been removed from the monorepo. If you depend on any of the following, you'll need to install them separately:
   - EVM, Browser, PDF, S3 storage
   - Ollama, Groq, Venice, Anthropic

The migration from V1 to V2 is expected to continue for several months, with the stable V2 release scheduled for later this year.
