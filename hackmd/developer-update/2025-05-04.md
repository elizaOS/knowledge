# ElizaOS Developer Update
**Week of April 28 - May 4, 2025**

## 1. Core Framework

The ElizaOS framework has undergone significant architectural changes this week, focusing on streamlining the codebase and improving developer experience:

- **Plugin System Restructuring**: The team has continued the strategic removal of plugins from the monorepo to improve maintainability and create a cleaner separation of concerns. This week saw the removal of several major plugins including Anthropic, Venice, Groq, Ollama, S3 storage, and Browser plugins.

- **Runtime Improvements**: Fixed a critical issue in the ElizaOS core package related to missing 'preconnect' property in fetch type definition. This was causing TypeScript build errors that affected several developers.

- **Character System Enhancement**: Added support for dynamically loading new characters with plugins while the runtime is running, though this currently requires plugins to be pre-installed.

- **Performance Optimization**: Eliminated unnecessary Express object creation to reduce overhead, and removed forced bootstrap plugin addition for more flexible configurations.

```typescript
// Previous implementation forced bootstrap plugin
const app = new ElizaOS({
  plugins: [bootstrapPlugin, ...userPlugins]
});

// New implementation allows full customization
const app = new ElizaOS({
  plugins: userPlugins // Bootstrap plugin no longer forced
});
```

## 2. New Features

### Scopable Knowledge Capabilities

Added new knowledge scoping functionality that allows agents to access specific subsets of knowledge based on context:

```typescript
// Configure knowledge with scopes
const knowledge = new KnowledgeBase({
  sources: [{
    type: 'document',
    content: documentData,
    metadata: {
      scope: 'technical' // Assign scope to this knowledge
    }
  }]
});

// Use scoped knowledge in agent
const response = await agent.chat({
  message: "How do I deploy ElizaOS?",
  knowledgeScope: 'technical' // Will only use knowledge with technical scope
});
```

### Unique PGLite Folder Generation

Added automatic creation of unique PGLite folders when not explicitly provided:

```typescript
// Before: Required manual folder specification
new PGLitePlugin({
  folder: './my-db-folder'
})

// Now: Automatically generates unique folder if not specified
new PGLitePlugin() // Will use a unique folder name automatically
```

### Twitter Timeline Functionality

Implemented Twitter timeline functionality to expand social media integration capabilities:

```typescript
// Initialize Twitter plugin with timeline functionality
const twitterPlugin = new TwitterPlugin({
  apiKey: process.env.TWITTER_API_KEY,
  apiSecret: process.env.TWITTER_API_SECRET,
  enableTimeline: true
});

// Retrieve and analyze timeline data
const timeline = await twitterPlugin.getTimeline('specificUser');
const analysis = await agent.analyze(timeline);
```

## 3. Bug Fixes

Several critical bugs were addressed this week:

- **Conversation History Persistence**: Fixed issue where chat history was disappearing after 3-5 minutes of inactivity in version 0.25.9.

- **CLI Version Reporting**: Resolved an inconsistency where the system would report an older CLI version despite successful installation of newer version.

- **Documentation Link Repairs**: Fixed broken documentation links on the eliza.how website, including the v1-v2 comparison page.

- **Windows Compatibility**: Improved Windows compatibility by addressing issues with code changes not being reflected when running on Windows. The recommended approach is still to use Ubuntu WSL2 for Windows users.

- **PostgreSQL Database Issues**: Fixed database connection issues for dockerized environments, particularly addressing container-specific networking challenges.

## 4. API Changes

### Authentication Middleware Enhancements

Implemented comprehensive authentication middleware with API key dialog for unauthorized access:

```typescript
// New authentication middleware usage
app.use('/api/secured', authMiddleware({
  showDialog: true, // Shows API key input dialog on unauthorized access
  redirectOnFailure: '/auth'
}));
```

### Extended OpenAI Plugin Support

The OpenAI plugin now supports custom embedding endpoints for greater flexibility:

```typescript
const openAiPlugin = new OpenAIPlugin({
  apiKey: process.env.OPENAI_API_KEY,
  embeddings: {
    customEndpoint: 'https://your-custom-embeddings-service.com/embed',
    dimensions: 1536
  }
});
```

### Removed API Endpoints

As part of the plugin restructuring, several API endpoints provided by removed plugins are no longer available in the core package. Developers should install these plugins separately to maintain functionality:

- `/api/browser/*` (Browser plugin)
- `/api/storage/s3/*` (S3 Storage plugin)
- `/api/models/anthropic/*` (Anthropic plugin)
- `/api/models/venice/*` (Venice plugin)
- `/api/models/groq/*` (Groq plugin)
- `/api/models/ollama/*` (Ollama plugin)

## 5. Social Media Integrations

### Twitter Plugin Improvements

- **Timeline Support**: Added functionality to retrieve and analyze Twitter timelines.
- **Typing Indicator**: Implemented typing indicator to provide better user feedback during response generation.
- **Error Handling**: Improved error handling for rate limits and API constraints.

### Discord Plugin Enhancements

- **Typing Indicator**: Added typing indicator to Discord plugin for better user interaction.
- **Verification System**: Fixed Collabland verification issues that were affecting role management, particularly for DegenAI token holders.

### New Social Integration Plans

Based on community discussions, development is planned for:
- Reddit plugin
- LinkedIn plugin
- Enhanced Telegram integration

## 6. Model Provider Updates

### Anthropic API Integration

- The Anthropic plugin has been moved out of the monorepo but continues to be supported with improved API key validation.
- Environment variable configuration has been enhanced for model selection:

```
# Configure Anthropic models in .env file
SMALL_ANTHROPIC_MODEL=claude-3-5-sonnet-20241022  # Use Sonnet instead of Haiku
ANTHROPIC_API_KEY=your_key_here
```

### OpenAI Enhancements

- Added support for custom embedding endpoints in the OpenAI plugin.
- Improved model usage by configuring Reply to use small models by default for cost optimization.

### Removed Model Integrations

As part of the monorepo cleanup, the following model providers are now available as separate plugins:
- Groq
- Ollama
- Venice

## 7. Breaking Changes

### V1 to V2 Migration Issues

The current stable release is ElizaOS version 1.0.0.Beta 41, while V2 is still in development with several new features:

- **New Plugin Architecture**: V2 has a completely redesigned plugin system where plugins are separated from the core system. Plugins developed for V1 will need to be updated to work with V2.

- **Character System Changes**: V2 includes an improved character system with better multimodal support. Character configurations from V1 may require updates.

- **Development Branch Recommendation**: For new plugin development, use the "v2-develop" branch rather than stable Beta 41.

- **Timeline for V2 Stable**: V2's timeline for stable release is estimated at "a few months" - maintain V1 compatibility in production systems until official V2 release.

- **CLI Command Changes**: Some CLI commands have changed behavior between versions. Use `elizaos start` inside the created project folder rather than npm commands for V2 projects.

- **Model Configuration Differences**: Model configuration approaches differ between versions - review documentation for your specific version.

To help with migration, documentation on version differences is being updated. A comprehensive guide will be published at https://eliza.how/blog/v1-v2 (link currently being fixed).