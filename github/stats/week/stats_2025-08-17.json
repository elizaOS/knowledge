{
  "interval": {
    "intervalStart": "2025-08-17T00:00:00.000Z",
    "intervalEnd": "2025-08-24T00:00:00.000Z",
    "intervalType": "week"
  },
  "repository": "elizaos/eliza",
  "overview": "From 2025-08-17 to 2025-08-24, elizaos/eliza had 11 new PRs (10 merged), 1 new issues, and 7 active contributors.",
  "topIssues": [
    {
      "id": "I_kwDOMT5cIs7GTJvn",
      "title": "Implement Run Orchestration & Isolation",
      "author": "linear",
      "number": 5782,
      "repository": "elizaos/eliza",
      "body": "### **Ticket: Implement Run Orchestration & Isolation**\n\n**ID:** `FEAT-126` (Example ID)\n\n**Epic:** `Scenario Matrix Runner`\n\n**Tags:** `cli`, `scenario-testing`, `feature`, `orchestration`\n\n**Estimated Story Points:** `13`\n\n**Dependencies:** `FEAT-123` (Matrix Configuration Schema), `FEAT-124` (CLI Command), `FEAT-125` (Parameter Override System)\n\n#### **1. Title**\n\n`feat(cli): Implement matrix run orchestration with complete isolation and cleanup`\n\n#### **2. Description**\n\nThis ticket implements the core execution engine for the Scenario Matrix Runner. It orchestrates the execution of all matrix combinations, ensures complete isolation between runs, and manages cleanup of artifacts. This is the most complex ticket in Epic 1 as it ties together all previous work and handles the actual scenario execution.\n\nThe orchestration system must be robust, handling failures gracefully while maintaining data integrity and system cleanliness. Each run must be completely isolated to prevent interference between test executions.\n\n#### **3. Acceptance Criteria**\n\n1. **Matrix Execution Loop:**\n   * Implement `executeMatrixRuns(config: MatrixConfig, combinations: MatrixCombination[]): Promise<MatrixRunResult[]>` that:\n     * Iterates through all generated matrix combinations\n     * Executes each combination the specified number of times (`runs_per_combination`)\n     * Maintains execution order and provides progress feedback\n     * Handles individual run failures without stopping the entire matrix execution\n2. **Run Isolation System:**\n   * Each scenario run must be completely isolated with:\n     * Separate temporary directories for each run (e.g., `./temp/matrix-run-001/`)\n     * Independent database instances (using unique database paths)\n     * Isolated log files and output artifacts\n     * Clean environment variable state between runs\n   * Implement `createIsolatedEnvironment(runId: string): Promise<IsolationContext>` that sets up the isolated environment\n   * Implement `cleanupIsolatedEnvironment(context: IsolationContext): Promise<void>` that removes all artifacts\n3. **Scenario Override Integration:**\n   * Use the parameter override system from ticket 1.3 to generate unique scenario configurations\n   * Write the modified scenario to the isolated environment as a temporary `.scenario.yaml` file\n   * Pass the temporary scenario file path to the existing scenario runner\n4. **Progress Tracking and Logging:**\n   * Real-time progress updates: `\"Executing run 15 of 36 (Combination 5/12, Run 3/3)\"`\n   * Estimated time remaining based on average run duration\n   * Clear indication of which parameter combination is currently running\n   * Summary statistics after each combination completes\n5. **Data Collection and Storage:**\n   * Capture comprehensive data for each run:\n     * Execution start and end timestamps\n     * Parameter combination used\n     * Scenario execution results (pass/fail, evaluation details)\n     * Performance metrics (execution time, memory usage)\n     * Any error messages or exceptions\n   * Store results in structured JSON format in the output directory\n   * Implement `saveRunResult(runId: string, result: ScenarioRunResult, outputDir: string): Promise<void>`\n6. **Error Handling and Recovery:**\n   * Graceful handling of individual run failures without stopping the matrix\n   * Timeout handling for runs that exceed reasonable execution time\n   * Resource cleanup even when runs fail or are interrupted\n   * Detailed error logging with context about which combination failed\n   * Option to continue or abort on first failure\n7. **Resource Management:**\n   * Monitor system resources (memory, disk space) during execution\n   * Implement safeguards against resource exhaustion\n   * Parallel execution limits to prevent system overload\n   * Cleanup of temporary files and databases between runs\n8. **Output Directory Structure:**\n\n   ```\n   output/matrix-<timestamp>/\n   ‚îú‚îÄ‚îÄ config.yaml              # Copy of the matrix configuration\n   ‚îú‚îÄ‚îÄ summary.json             # High-level execution summary\n   ‚îú‚îÄ‚îÄ runs/\n   ‚îÇ   ‚îú‚îÄ‚îÄ run-001.json         # Individual run results\n   ‚îÇ   ‚îú‚îÄ‚îÄ run-002.json\n   ‚îÇ   ‚îî‚îÄ‚îÄ ...\n   ‚îî‚îÄ‚îÄ logs/\n       ‚îú‚îÄ‚îÄ matrix-execution.log # Overall execution log\n       ‚îú‚îÄ‚îÄ run-001.log         # Individual run logs\n       ‚îî‚îÄ‚îÄ ...\n   ```\n\n#### **4. Technical Implementation Details**\n\n**File Structure:**\n\n```\npackages/cli/src/commands/scenario/src/\n‚îú‚îÄ‚îÄ matrix-orchestrator.ts     # Main orchestration logic\n‚îú‚îÄ‚îÄ run-isolation.ts           # Environment isolation utilities\n‚îú‚îÄ‚îÄ progress-tracker.ts        # Progress reporting and ETA calculation\n‚îú‚îÄ‚îÄ resource-monitor.ts        # System resource monitoring\n‚îî‚îÄ‚îÄ __tests__/\n    ‚îú‚îÄ‚îÄ matrix-orchestrator.test.ts\n    ‚îú‚îÄ‚îÄ run-isolation.test.ts\n    ‚îî‚îÄ‚îÄ integration/\n        ‚îî‚îÄ‚îÄ full-matrix.test.ts\n```\n\n**Core Types:**\n\n```typescript\ninterface IsolationContext {\n  runId: string;\n  tempDir: string;\n  dbPath: string;\n  logPath: string;\n  scenarioPath: string;\n  cleanup: () => Promise<void>;\n}\ninterface MatrixRunResult {\n  runId: string;\n  combinationId: string;\n  parameters: Record<string, any>;\n  startTime: Date;\n  endTime: Date;\n  duration: number;\n  success: boolean;\n  scenarioResult?: any;\n  error?: string;\n  metrics: {\n    memoryUsage: number;\n    diskUsage: number;\n    tokenCount?: number;\n  };\n}\ninterface MatrixExecutionSummary {\n  totalRuns: number;\n  successfulRuns: number;\n  failedRuns: number;\n  totalDuration: number;\n  averageRunTime: number;\n  combinations: CombinationSummary[];\n}\n```\n\n#### **5. Integration with Existing Scenario Runner**\n\n* Reuse existing scenario execution logic from `packages/cli/src/commands/scenario/index.ts`\n* Modify the existing runner to accept an output directory parameter for isolated execution\n* Ensure the existing scenario runner can work with temporary scenario files\n* Maintain compatibility with all existing scenario features and evaluators\n\n#### **6. Performance Considerations**\n\n* Implement configurable parallel execution (default: 1, max: CPU cores)\n* Efficient cleanup that doesn't block subsequent runs\n* Memory-efficient handling of large numbers of runs\n* Disk space monitoring to prevent system exhaustion\n\n#### **7. Testing Requirements**\n\n**Unit Tests:**\n\n* Isolation context creation and cleanup\n* Progress tracking accuracy\n* Resource monitoring functionality\n* Error handling for various failure scenarios\n\n**Integration Tests:**\n\n* Full matrix execution with real scenario files\n* Cleanup verification (no leftover artifacts)\n* Resource exhaustion handling\n* Interruption and recovery testing\n\n**Load Tests:**\n\n* Large matrix configurations (100+ combinations)\n* Long-running scenarios\n* Memory and disk usage validation\n\n#### **8. Error Handling Examples**\n\n```\n‚úó Run 15 failed: Timeout after 300 seconds\n  Combination: model=gpt-4, prompt=variant-3\n  Cleaning up isolated environment...\n‚ö† System memory usage high (85%), reducing parallel execution\n  Running 1 scenario at a time instead of 4\n‚úó Matrix execution aborted: Insufficient disk space\n  Required: 2.5 GB, Available: 1.2 GB\n  Cleaned up 14 completed runs, 3 runs remaining\n```\n\n#### **9. Out of Scope**\n\n* Report generation functionality (Epic 3)\n* Advanced evaluation and data collection (Epic 2)\n* CLI improvements beyond basic progress reporting",
      "createdAt": "2025-08-16T05:34:34Z",
      "closedAt": "2025-08-19T15:59:43Z",
      "state": "CLOSED",
      "commentCount": 2
    },
    {
      "id": "I_kwDOMT5cIs7GTMUc",
      "title": "Implement Dynamic Report Rendering",
      "author": "linear",
      "number": 5789,
      "repository": "elizaos/eliza",
      "body": "### **Ticket: Implement Dynamic Report Rendering**\n\n**ID:** `FEAT-133` (Example ID)\n\n**Epic:** `Performance Reporting Dashboard`\n\n**Tags:** `cli`, `reporting`, `feature`, `javascript`, `visualization`\n\n**Estimated Story Points:** `8`\n\n**Dependencies:** `FEAT-131` (Data Aggregation), `FEAT-132` (HTML Template)\n\n#### **1. Title**\n\n`feat(cli): Implement dynamic data injection and rendering for the HTML Performance Report`\n\n#### **2. Description**\n\nThis ticket brings the Performance Report to life. It involves creating the logic to take the aggregated `report.json` data and inject it into the static `report_template.html`, producing a final, fully-rendered, and interactive HTML file.\n\nThe work will primarily be in modifying the `elizaos report generate` command to read both the data and the template, inject the data, and write the final output. This includes writing the client-side JavaScript (embedded within the template) that will be responsible for all DOM manipulation, chart generation, and rendering of dynamic tables and lists.\n\n#### **3. Acceptance Criteria**\n\n1. **File I/O in** `generate` command:\n   * The `elizaos report generate` command is updated to:\n     * Read the aggregated `report.json` file into memory.\n     * Read the static `report_template.html` file into memory.\n     * Inject the entire JSON data object into the `<script id=\"report-data\">` tag within the HTML.\n     * Save the resulting string as the final report file (e.g., `performance_report.html`).\n2. **Client-Side Rendering Logic:**\n   * The JavaScript embedded in the `report_template.html` is implemented.\n   * On `DOMContentLoaded`, the script must:\n     * Parse the JSON from the `<script id=\"report-data\">` tag.\n     * Call a main `renderReport(data)` function with the parsed data.\n3. **DOM Population:**\n   * The `renderReport` function correctly populates all the simple data placeholders defined in the template (e.g., setting the `innerText` of `<span id=\"summary-total-runs\">`).\n4. **Chart Generation:**\n   * The script uses the embedded Chart.js library to render meaningful visualizations:\n     * A **Bar Chart** for \"Capability Success Rates,\" showing the success percentage for each capability.\n     * A **Grouped Bar Chart** for \"Results by Parameter,\" allowing for easy comparison of key metrics (like success rate and average execution time) across different parameter values (e.g., comparing `gpt-4` vs. `gpt-3.5`).\n   * Charts must be correctly labeled, include tooltips, and use colors that are consistent with the report's design.\n5. **Dynamic Table Rendering:**\n   * The \"Detailed Run Explorer\" table is dynamically populated by creating `<tr>` elements for each run in the `raw_results` array and appending them to the `<tbody id=\"detailed-runs-tbody\">`.\n   * The table should be searchable and sortable (using a lightweight, embedded library or custom JavaScript).\n6. **Trajectory Visualization:**\n   * The \"Common Action Trajectories\" section is populated.\n   * This includes logic to render the aggregated trajectory data, potentially as a simple ranked list or as a more advanced visual element like a Sankey diagram (using a library like D3 or Google Charts, if feasible to embed).\n\n#### **4. Technical Implementation Details**\n\n**Files to Modify:**\n\n* `packages/cli/src/commands/report/generate.ts`: Add the file I/O and data injection logic.\n* `packages/cli/src/commands/report/src/assets/report_template.html`: Implement the client-side JavaScript rendering logic within the `<script>` tags.\n\n**Example Client-Side JavaScript Snippet:**\n\n```html\n<script>\n  document.addEventListener('DOMContentLoaded', () => {\n    const dataElement = document.getElementById('report-data');\n    if (dataElement) {\n      const reportData = JSON.parse(dataElement.textContent);\n      renderReport(reportData);\n    }\n  });\n  function renderReport(data) {\n    // 1. Populate simple values\n    document.getElementById('summary-total-runs').innerText = data.summary_stats.total_runs;\n    \n    // 2. Render Capability Chart\n    const ctx = document.getElementById('capability-chart').getContext('2d');\n    new Chart(ctx, {\n      type: 'bar',\n      data: {\n        labels: Object.keys(data.summary_stats.capability_success_rates),\n        datasets: [{\n          label: 'Success Rate',\n          data: Object.values(data.summary_stats.capability_success_rates).map(d => d * 100),\n          // ...chart options\n        }]\n      }\n    });\n    // 3. Render Detailed Runs Table\n    const tbody = document.getElementById('detailed-runs-tbody');\n    data.raw_results.forEach(run => {\n      const row = document.createElement('tr');\n      // ...create and append cells for the run data\n      tbody.appendChild(row);\n    });\n  }\n</script>\n```\n\n#### **5. Testing Requirements**\n\n* **Integration Tests:**\n  * Update the integration test for the `generate` command. After the command runs, the test should:\n    * Read the output `performance_report.html`.\n    * Use a tool like `jsdom` to parse the HTML and verify that the data has been correctly injected into the `<script id=\"report-data\">` tag.\n* **Manual End-to-End Testing:**\n  * Run the command on a sample `report.json` file.\n  * Open the resulting HTML file in a browser.\n  * Verify that all charts render correctly, all data points are populated, the table is functional, and there are no console errors.\n\n#### **6. Out of Scope**\n\n* The implementation of the optional PDF export feature. This ticket is only concerned with generating the final HTML file.\n* The data aggregation itself; this ticket assumes the `report.json` file is already correctly structured and complete.",
      "createdAt": "2025-08-16T05:52:36Z",
      "closedAt": "2025-08-18T05:15:37Z",
      "state": "CLOSED",
      "commentCount": 1
    },
    {
      "id": "I_kwDOMT5cIs7GTMCq",
      "title": "Design & Build HTML Report Template",
      "author": "linear",
      "number": 5788,
      "repository": "elizaos/eliza",
      "body": "### **Ticket: Design & Build HTML Report Template**\n\n**ID:** `FEAT-132` (Example ID)\n\n**Epic:** `Performance Reporting Dashboard`\n\n**Tags:** `ui`, `reporting`, `feature`, `html`, `css`\n\n**Estimated Story Points:** `5`\n\n**Dependencies:** `FEAT-131` (`report.json` data structure)\n\n#### **1. Title**\n\n`feat(cli): Design and build a static, self-contained HTML template for the Performance Report`\n\n#### **2. Description**\n\nThis ticket focuses on the user interface and design of the performance report. The goal is to create a professional, clean, and data-rich HTML file that will serve as the template for our reporting system. This template will be a static asset, later populated with dynamic data by the report generation logic.\n\nThe design should prioritize clarity and ease of navigation, allowing a developer to quickly understand the high-level results of a matrix run and then drill down into specific areas of interest. The final deliverable is a single, self-contained `.html` file with embedded CSS and JavaScript, ensuring the report is easily shareable and viewable in any modern web browser without requiring a web server.\n\n#### **3. Acceptance Criteria**\n\n1. **Report Structure and Layout:**\n   * A clear, hierarchical layout is established for the report. The design must include distinct sections for:\n     * **Report Header:** Title, date of generation, and a link to the matrix configuration used.\n     * **High-Level Summary:** Key metrics displayed prominently at the top (e.g., total runs, overall success rate, average execution time).\n     * **Results by Parameter:** A section for each matrix parameter (e.g., \"Performance by LLM Model\"), with subsections for each value.\n     * **Capability Analysis:** A dedicated section showing the success rate for each defined agent capability.\n     * **Trajectory Analysis:** A section to visualize the most common action sequences.\n     * **Detailed Run Explorer:** A table or list view to browse the raw data for every individual run.\n2. **Visual Design and Styling:**\n   * The report uses a clean, modern aesthetic. A lightweight CSS framework like [Pico.css](https://picocss.com/) or a simple custom-written stylesheet should be used to maintain a small file size.\n   * Styling is embedded directly within the HTML file in a `<style>` tag to ensure portability.\n   * The design must be responsive and readable on both desktop and mobile screen sizes.\n   * Use of color should be intentional, highlighting key data points (e.g., green for success, red for failure) while remaining accessible.\n3. **Component Placeholders:**\n   * The HTML template must contain clearly identifiable placeholders for all dynamic data. This includes:\n     * `<span>` or `<div>` elements with specific `id` attributes for single data points (e.g., `<span id=\"total-runs\"></span>`).\n     * HTML `<canvas>` elements for charts, each with a unique `id`.\n     * Template blocks or empty table bodies (`<tbody>`) for data that will be rendered in loops (e.g., the detailed run list).\n4. **JavaScript Integration:**\n   * The chosen charting library ([Chart.js](https://www.chartjs.org/) is recommended) is embedded directly into the HTML file in a `<script>` tag.\n   * A second embedded `<script>` tag will contain the \"rendering\" logic. This script will:\n     * Define a function like `renderReport(data)`, where `data` is the `ReportData` JSON object.\n     * This function will contain the logic to find the placeholders in the DOM and populate them with the data.\n     * A placeholder for the data itself is included, e.g., `<script id=\"report-data\" type=\"application/json\">...</script>`.\n5. **Self-Contained Asset:**\n   * The final deliverable is a single `.html` file. All CSS and JavaScript must be embedded. No external network requests should be necessary to view the report's structure and styling (data will be injected later).\n\n#### **4. Technical Implementation Details**\n\n**File Structure:**\n\n```\npackages/cli/src/commands/report/src/\n‚îî‚îÄ‚îÄ assets/\n    ‚îî‚îÄ‚îÄ report_template.html  # The new, self-contained HTML file\n```\n\n**Example HTML Placeholders:**\n\n```html\n<!-- For a single value -->\n<h2>Summary</h2>\n<p>Total Runs: <strong id=\"summary-total-runs\">[loading...]</strong></p>\n<!-- For a chart -->\n<h3>Capability Success Rates</h3>\n<canvas id=\"capability-chart\" width=\"400\" height=\"200\"></canvas>\n<!-- For a table to be populated by a loop -->\n<h3>Detailed Run Results</h3>\n<table>\n  <thead>\n    <tr>\n      <th>Run ID</th>\n      <th>Success</th>\n      <th>Model</th>\n      <th>Prompt</th>\n    </tr>\n  </thead>\n  <tbody id=\"detailed-runs-tbody\">\n    <!-- Rows will be injected here by JavaScript -->\n  </tbody>\n</table>\n<!-- For the data island -->\n<script id=\"report-data\" type=\"application/json\">\n  {}\n</script>\n```\n\n#### **5. Design Mockup / Wireframe**\n\n(A simple text-based wireframe should be included in the ticket to guide the developer)\n\n```\n+------------------------------------------------------+\n| Performance Report: GitHub Issue Analysis            |\n| Generated: 2023-10-27                                |\n+------------------------------------------------------+\n| SUMMARY                                              |\n| Total Runs: 18    Success Rate: 66%    Avg Time: 8.2s |\n+------------------------------------------------------+\n| CAPABILITY SUCCESS RATES                             |\n| [================\n| [===========     ] Formats Response (55%)             |\n+------------------------------------------------------+\n| PERFORMANCE BY LLM MODEL                             |\n| gpt-4-turbo: 9/9 (100%)    gpt-3.5-turbo: 3/9 (33%)    |\n| [ Bar Chart comparing models on key metrics ]        |\n+------------------------------------------------------+\n| COMMON ACTION TRAJECTORIES                           |\n| 1. THINK -> LIST_ISSUES -> REPLY (12 runs)           |\n| 2. THINK -> SEARCH -> REPLY (6 runs)                 |\n+------------------------------------------------------+\n| DETAILED RUNS                                        |\n| [ A filterable, sortable table of all 18 runs ]      |\n+------------------------------------------------------+\n```\n\n#### **6. Testing Requirements**\n\n* **Manual Testing:** Open the final `report_template.html` file in multiple browsers (Chrome, Firefox, Safari) to ensure consistent rendering and responsiveness.\n* **Static Analysis:** Run an HTML validator and a linter on the file to ensure it is well-formed and follows best practices.\n\n#### **7. Out of Scope**\n\n* The logic for actually injecting the `ReportData` JSON into the template. This ticket is only about creating the static HTML shell.\n* The implementation of the `elizaos report generate` command itself.\n* The data aggregation logic.",
      "createdAt": "2025-08-16T05:50:44Z",
      "closedAt": "2025-08-18T05:15:20Z",
      "state": "CLOSED",
      "commentCount": 1
    },
    {
      "id": "I_kwDOMT5cIs7GTLk4",
      "title": "Implement `elizaos report generate` Command",
      "author": "linear",
      "number": 5787,
      "repository": "elizaos/eliza",
      "body": "### **Ticket: Implement** `elizaos report generate` Command\n\n**ID:** `FEAT-131` (Example ID)\n\n**Epic:** `Performance Reporting Dashboard`\n\n**Tags:** `cli`, `reporting`, `feature`, `data-analysis`\n\n**Estimated Story Points:** `8`\n\n**Dependencies:** `FEAT-130` (Centralize and Serialize Run Data)\n\n#### **1. Title**\n\n`feat(cli): Implement 'elizaos report generate' command for data aggregation and analysis`\n\n#### **2. Description**\n\nThis ticket introduces the user-facing entry point for the Performance Reporting Dashboard: the `elizaos report generate` command. The primary responsibility of this command is to ingest the raw JSON output from a Scenario Matrix run, process it, and perform the complex data aggregation required to generate an insightful report.\n\nThe command will read all individual `run-*.json` files, calculate high-level statistics, group results by the matrix parameters, and analyze agent trajectories. The final output of this command will be a single, structured `ReportData` object, which will serve as the complete data context for rendering the HTML report in a subsequent ticket.\n\nThis is a critical data processing step that transforms raw run data into meaningful, aggregated insights.\n\n#### **3. Acceptance Criteria**\n\n1. **CLI Command Registration:**\n   * A new top-level command `report` is created.\n   * Under `report`, a subcommand `generate` is registered.\n   * The command accepts one required argument, `<input_dir>`, which is the path to the output directory of a matrix run.\n   * It also accepts an optional `--output-path` flag to specify where to save the final `report.json` file. If not provided, it defaults to `<input_dir>/report.json`.\n2. **Data Ingestion and Validation:**\n   * The command recursively finds and reads all `run-*.json` files within the `<input_dir>`.\n   * It validates the structure of each JSON file against the `ScenarioRunResult` schema.\n   * Malformed or incomplete files are gracefully skipped, and a warning is logged.\n   * The command provides a clear error and exits if the input directory is not found or contains no valid run files.\n3. **Data Aggregation Logic:**\n   * The core of the command is an `AnalysisEngine` that processes the array of `ScenarioRunResult` objects.\n   * It must calculate **overall summary statistics**: total runs, average execution time, overall capability success rates, etc.\n   * It must calculate **grouped statistics**: The engine must group the results by each matrix parameter and value (e.g., group by `character.llm.model`). For each group, it calculates the same summary statistics, allowing for direct comparison (e.g., success rate of `gpt-4` vs. `gpt-3.5`).\n   * It must perform **trajectory analysis**: Aggregate all `trajectory` arrays to identify the most common action sequences and calculate the frequency of each path.\n4. **Structured** `ReportData` Output:\n   * The `AnalysisEngine` produces a single, large `ReportData` object.\n   * This object's schema is formally defined in TypeScript and contains all aggregated data in a clean, predictable structure, ready for a rendering engine.\n   * The command serializes this `ReportData` object to a pretty-printed JSON file at the specified output path.\n\n#### **4. Technical Implementation Details**\n\n**File Structure:**\n\n```\npackages/cli/src/commands/report/\n‚îú‚îÄ‚îÄ index.ts              # Registers the 'report' command\n‚îú‚îÄ‚îÄ generate.ts           # Implements the 'generate' subcommand\n‚îî‚îÄ‚îÄ src/\n    ‚îú‚îÄ‚îÄ analysis-engine.ts  # Core data aggregation logic\n    ‚îú‚îÄ‚îÄ report-schema.ts    # Defines the 'ReportData' interface\n    ‚îî‚îÄ‚îÄ __tests__/\n        ‚îî‚îÄ‚îÄ analysis-engine.test.ts\n```\n\n`ReportData` Interface (High-Level Example):\n\n```typescript\ninterface ReportData {\n  metadata: {\n    report_generated_at: string;\n    matrix_config: MatrixConfig; // From the original run\n  };\n  summary_stats: {\n    total_runs: number;\n    total_failed_runs: number;\n    average_execution_time: number;\n    capability_success_rates: Record<string, number>; // { \"Formats Response\": 0.75 }\n  };\n  results_by_parameter: {\n    [parameter_name: string]: { // e.g., \"character.llm.model\"\n      [parameter_value: string]: ReportSummaryStats; // e.g., \"gpt-4-turbo\" has its own summary_stats\n    };\n  };\n  common_trajectories: {\n    sequence: string[]; // e.g., [\"THINK\", \"LIST_ISSUES\", \"REPLY\"]\n    count: number;\n    average_duration: number;\n  }[];\n  raw_results: ScenarioRunResult[]; // Include all original data for detailed drill-downs\n}\n```\n\n**Example CLI Usage:**\n\n```bash\n# Generate a report from a previous matrix run\nelizaos report generate ./output/matrix-20231027-1000/\n# Specify a different output location for the aggregated data\nelizaos report generate ./output/matrix-20231027-1000/ --output-path ./reports/latest-report.json\n```\n\n#### **5. Testing Requirements**\n\n* **Unit Tests:**\n  * Extensive unit tests for the `AnalysisEngine` are critical. Provide it with a mock array of `ScenarioRunResult` objects and assert that the resulting `ReportData` object contains the correct aggregations, groupings, and statistical calculations.\n  * Test edge cases like empty input, single-run input, and runs with missing data points.\n* **Integration Tests:**\n  * Create a test that runs the `elizaos report generate` command on a pre-generated fixture directory containing a set of `run-*.json` files.\n  * The test should verify that the command exits successfully and that the output `report.json` file is created and contains valid, non-empty data.\n\n#### **6. Out of Scope**\n\n* The design or implementation of the final HTML template. This ticket's final artifact is the `report.json` file, not a user-facing document.\n* The logic for rendering charts or any other UI components (handled in Ticket 3.2 and 3.3).\n* Any modification to the scenario running or data collection process; this command is strictly read-only on the matrix run output.",
      "createdAt": "2025-08-16T05:47:08Z",
      "closedAt": "2025-08-18T05:15:07Z",
      "state": "CLOSED",
      "commentCount": 1
    },
    {
      "id": "I_kwDOMT5cIs7GTLOh",
      "title": "Centralize and Serialize Run Data",
      "author": "linear",
      "number": 5786,
      "repository": "elizaos/eliza",
      "body": "### **Ticket: Centralize and Serialize Run Data**\n\n**ID:** `FEAT-130` (Example ID)\n\n**Epic:** `Advanced Evaluation & Data Collection`\n\n**Tags:** `cli`, `scenario-testing`, `feature`, `data-pipeline`\n\n**Estimated Story Points:** `5`\n\n**Dependencies:** `FEAT-126` (Run Orchestration), `FEAT-127` (Structured JSON Output), `FEAT-129` (Agent Trajectory Logging)\n\n#### **1. Title**\n\n`feat(cli): Centralize and serialize all scenario run data into a structured JSON output file`\n\n#### **2. Description**\n\nThis ticket focuses on the final step of the data collection phase: bringing together all the rich data gathered from a single scenario run and saving it to a well-defined, structured JSON file. This file will be the canonical source of truth for a single execution and will serve as the input for the Performance Reporting Dashboard (Epic 3).\n\nThe implementation will create a new service or utility responsible for aggregating data from various sources‚Äîthe matrix configuration, the evaluation engine, the agent runtime's trajectory log, and performance timers‚Äîand ensuring it conforms to our master `ScenarioRunResult` schema before being written to disk.\n\n#### **3. Acceptance Criteria**\n\n1. `ScenarioRunResult` Schema:\n   * A comprehensive `ScenarioRunResult` interface is finalized in `packages/cli/src/commands/scenario/src/schema.ts`.\n   * This master interface must consolidate all data points from the previous tickets and include:\n     * `run_id`: A unique identifier for the run.\n     * `matrix_combination_id`: An identifier linking it to a specific set of parameters.\n     * `parameters`: An object detailing the specific matrix configuration for this run (e.g., `{ \"character.llm.model\": \"gpt-4-turbo\" }`).\n     * `metrics`: An object containing performance data (`execution_time_seconds`, `llm_calls`, `total_tokens`, etc.).\n     * `evaluations`: The array of `EvaluationResult` objects from the `EvaluationEngine` (Ticket 2.1).\n     * `trajectory`: The array of `TrajectoryStep` objects from the `AgentRuntime` (Ticket 2.3).\n     * `final_agent_response`: The final text/object response from the agent to the user.\n     * `error`: A field to store any fatal error message if the run failed unexpectedly.\n2. **Data Aggregation Utility:**\n   * A new utility or class, e.g., `RunDataAggregator`, is created.\n   * It will have methods to collect data from different parts of the system throughout a run's lifecycle.\n   * It will have a final `buildResult()` method that assembles all the collected pieces into a single, validated `ScenarioRunResult` object.\n3. **File Serialization Logic:**\n   * The `MatrixOrchestrator` (from Ticket 1.4) will use this new utility to generate the result for each run.\n   * After a run completes (or fails), the orchestrator will call a function to serialize the `ScenarioRunResult` object to a JSON file.\n   * The output file will be named according to a consistent pattern (e.g., `run-<run_id>.json`) and saved within the unique output directory created for the matrix execution.\n   * The JSON output must be cleanly formatted and human-readable (pretty-printed with an indentation of 2 spaces).\n4. **Integration with Matrix Orchestrator:**\n   * The main execution loop in the `MatrixOrchestrator` is updated to wrap each scenario run in a `try...catch` block.\n   * In both success and failure cases, the orchestrator ensures that the data aggregator is called and a result file is written, capturing the error details if the run failed.\n\n#### **4. Technical Implementation Details**\n\n**Files to Modify / Create:**\n\n* `packages/cli/src/commands/scenario/src/schema.ts`: Finalize the `ScenarioRunResult` master interface.\n* `packages/cli/src/commands/scenario/src/data-aggregator.ts`: New file for the `RunDataAggregator` class.\n* `packages/cli/src/commands/scenario/src/matrix-orchestrator.ts`: Integrate the aggregator and serialization logic into the main execution loop.\n\n**Final** `ScenarioRunResult` JSON Structure (Example):\n\n```json\n{\n  \"run_id\": \"run-20231027-015\",\n  \"matrix_combination_id\": \"combo-003\",\n  \"parameters\": {\n    \"character.llm.model\": \"gpt-4-turbo\",\n    \"run[0].input\": \"Show me what's open in the elizaOS/eliza GitHub.\"\n  },\n  \"metrics\": {\n    \"execution_time_seconds\": 14.7,\n    \"llm_calls\": 2,\n    \"total_tokens\": 2100\n  },\n  \"final_agent_response\": \"Here are the open issues for elizaOS/eliza: #123 Fix the login button, #124 Improve documentation...\",\n  \"evaluations\": [\n    {\n      \"evaluator_type\": \"llm_judge\",\n      \"success\": false,\n      \"summary\": \"...\",\n      \"details\": {\n        \"qualitative_summary\": \"...\",\n        \"capability_checklist\": [\n          { \"capability\": \"Formats Final Response\", \"achieved\": false, \"reasoning\": \"...\" }\n        ]\n      }\n    }\n  ],\n  \"trajectory\": [\n    { \"type\": \"thought\", \"content\": \"...\" },\n    { \"type\": \"action\", \"content\": { \"name\": \"LIST_GITHUB_ISSUES\", \"parameters\": { \"owner\": \"elizaOS\", \"repo\": \"eliza\" } } },\n    { \"type\": \"observation\", \"content\": \"[...]\" },\n    { \"type\": \"thought\", \"content\": \"...\" }\n  ],\n  \"error\": null\n}\n```\n\n#### **5. Testing Requirements**\n\n* **Unit Tests:**\n  * Test the `RunDataAggregator` to ensure it correctly assembles the `ScenarioRunResult` object from mock inputs.\n  * Test the file serialization logic, including pretty-printing and correct file pathing.\n  * Test the error handling path, ensuring that a valid result file (with the `error` field populated) is created even when a run fails catastrophically.\n* **Integration Tests:**\n  * Run a full matrix test with a small number of combinations.\n  * After the test completes, manually inspect the generated JSON files in the output directory to verify their structure and content are correct and complete.\n\n#### **6. Out of Scope**\n\n* The creation of the final `summary.json` file for the entire matrix run. This ticket is only concerned with the individual `run-*.json` files.\n* Any form of report generation or data visualization (this is handled in Epic 3).\n* The implementation of any of the data sources themselves (e.g., trajectory logging); this ticket only consumes and aggregates the data.",
      "createdAt": "2025-08-16T05:44:32Z",
      "closedAt": "2025-08-18T05:14:54Z",
      "state": "CLOSED",
      "commentCount": 1
    }
  ],
  "topPRs": [
    {
      "id": "PR_kwDOMT5cIs6kWSnk",
      "title": "feat: Sessions API ++",
      "author": "ChristopherTrimboli",
      "number": 5799,
      "body": "## Enhanced Session Management with Advanced Timeout Configuration and Lifecycle Control\r\n\r\n### Overview\r\nThis PR significantly enhances the sessions API with comprehensive timeout management, auto-renewal capabilities, and robust error handling. The changes transform the basic session management into an enterprise-ready system with configurable lifecycles, warning states, and graceful cleanup mechanisms.\r\n\r\n### Key Improvements\r\n\r\n#### üîß **Advanced Timeout Configuration System**\r\n**Before:** Simple fixed timeout (`SESSION_TIMEOUT_MS`)\r\n**After:** Multi-layered timeout configuration with:\r\n- Configurable timeout minutes (5-1440 min range)\r\n- Auto-renewal capabilities\r\n- Maximum session duration limits\r\n- Warning threshold notifications\r\n- Agent-specific timeout settings\r\n- Session-specific overrides\r\n\r\n#### üõ°Ô∏è **Robust Error Handling**\r\n**Before:** Basic `errorResponse` function with generic error messages\r\n**After:** Comprehensive error system with:\r\n- 11 custom error classes (`SessionNotFoundError`, `SessionExpiredError`, etc.)\r\n- Detailed error context and metadata\r\n- Centralized error middleware\r\n- Type-safe error handling throughout\r\n\r\n#### ‚ôªÔ∏è **Session Lifecycle Management**\r\n**New Features:**\r\n- **Auto-renewal**: Sessions automatically extend on activity\r\n- **Manual renewal**: `/sessions/:id/renew` endpoint\r\n- **Heartbeat support**: `/sessions/:id/heartbeat` for keep-alive\r\n- **Warning states**: Proactive expiration notifications\r\n- **Renewal tracking**: Monitor renewal counts and patterns\r\n- **Graceful expiration**: Proper cleanup of expired sessions\r\n\r\n#### üéØ **Type Safety Enhancements**\r\n**Added:**\r\n- Type guards for all request/response objects\r\n- `isValidSession()`, `isCreateSessionRequest()`, `isSendMessageRequest()`\r\n- `isValidTimeoutConfig()` for configuration validation\r\n- Proper TypeScript interfaces for all data structures\r\n\r\n#### üîå **New API Endpoints**\r\n```\r\nPOST   /sessions/:id/renew      - Manually renew a session\r\nPOST   /sessions/:id/heartbeat  - Keep session alive\r\nPATCH  /sessions/:id/timeout    - Update timeout configuration\r\n```\r\n\r\n#### üìä **Enhanced Health Monitoring**\r\n**Before:** Basic session count\r\n**After:** Detailed health metrics including:\r\n- Active vs expired sessions\r\n- Sessions expiring soon\r\n- Invalid session detection\r\n- Server uptime tracking\r\n\r\n#### üßπ **Memory Leak Prevention**\r\n**New:**\r\n- `SessionRouter` interface with cleanup method\r\n- Proper interval management with `activeCleanupIntervals` Set\r\n- Process handler registration tracking\r\n- Resource cleanup on router destruction\r\n\r\n#### üìà **Improved Pagination**\r\n**Enhanced:**\r\n- Better cursor-based pagination with proper `before`/`after` handling\r\n- Cursor information in response for easier client implementation\r\n- Proper handling of edge cases in date range queries\r\n\r\n### Breaking Changes\r\nNone - All existing endpoints maintain backward compatibility while adding optional new features.\r\n\r\n### Migration Guide\r\nExisting clients will continue to work without changes. To leverage new features:\r\n\r\n1. **Enable auto-renewal**: Include `timeoutConfig: { autoRenew: true }` in session creation\r\n2. **Set custom timeouts**: Add `timeoutConfig: { timeoutMinutes: 60 }` \r\n3. **Monitor expiration**: Check `isNearExpiration` in responses\r\n4. **Use heartbeats**: Send periodic POST to `/sessions/:id/heartbeat`\r\n\r\n### Configuration\r\nNew environment variables (all optional):\r\n```env\r\nSESSION_DEFAULT_TIMEOUT_MINUTES=30      # Default: 30\r\nSESSION_MIN_TIMEOUT_MINUTES=5           # Default: 5  \r\nSESSION_MAX_TIMEOUT_MINUTES=1440        # Default: 1440 (24h)\r\nSESSION_MAX_DURATION_MINUTES=720        # Default: 720 (12h)\r\nSESSION_WARNING_THRESHOLD_MINUTES=5     # Default: 5\r\nSESSION_CLEANUP_INTERVAL_MINUTES=5      # Default: 5\r\nCLEAR_SESSIONS_ON_SHUTDOWN=false        # Default: false\r\n```\r\n\r\n### Technical Details\r\n\r\n#### Session State Structure\r\n```typescript\r\ninterface Session {\r\n  // ... existing fields ...\r\n  expiresAt: Date;              // NEW: Calculated expiration time\r\n  timeoutConfig: {              // NEW: Comprehensive timeout settings\r\n    timeoutMinutes?: number;\r\n    autoRenew?: boolean;\r\n    maxDurationMinutes?: number;\r\n    warningThresholdMinutes?: number;\r\n  };\r\n  renewalCount: number;         // NEW: Track renewal history\r\n  warningState?: {              // NEW: Warning notification state\r\n    sent: boolean;\r\n    sentAt: Date;\r\n  };\r\n}\r\n```\r\n\r\n#### Error Classes Hierarchy\r\n- `SessionError` (base class)\r\n  - `SessionNotFoundError`\r\n  - `SessionExpiredError`\r\n  - `SessionCreationError`\r\n  - `SessionRenewalError`\r\n  - `MessageSendError`\r\n  - `InvalidUuidError`\r\n  - `MissingFieldsError`\r\n  - `InvalidContentError`\r\n  - `InvalidMetadataError`\r\n  - `InvalidPaginationError`\r\n  - `InvalidTimeoutConfigError`\r\n  - `AgentNotFoundError`\r\n\r\n### Testing\r\n- ‚úÖ All error scenarios covered with proper error classes\r\n- ‚úÖ Timeout and renewal logic validated\r\n- ‚úÖ Memory leak prevention verified\r\n- ‚úÖ Backward compatibility maintained\r\n\r\n### Performance Impact\r\n- Minimal overhead from timeout calculations\r\n- Efficient cleanup with configurable intervals\r\n- Optimized validation with early returns\r\n- No impact on existing session operations\r\n\r\n### Security Considerations\r\n- Session expiration enforced at API level\r\n- Automatic cleanup of stale sessions\r\n- Validation of all input parameters\r\n- No sensitive data in error responses (except in dev mode)",
      "repository": "elizaos/eliza",
      "createdAt": "2025-08-19T18:39:03Z",
      "mergedAt": "2025-08-20T14:10:28Z",
      "additions": 2377,
      "deletions": 559
    },
    {
      "id": "PR_kwDOMT5cIs6j_jmP",
      "title": "feat(bootstrap): async embedding generation via queue service",
      "author": "0xbbjoker",
      "number": 5793,
      "body": "# Relates to\r\n\r\nPerformance improvement for message processing latency - embeddings were blocking runtime for 500ms+ per message\r\n\r\n# Risks\r\n\r\n**Low risk** - The change is backward compatible and includes fallback behavior. Main risks:\r\n- Memory usage could increase if embedding queue grows large (mitigated by priority queue and processing limits)\r\n- Embeddings may be generated slightly later than before (acceptable trade-off for faster message responses)\r\n\r\n# Background\r\n\r\n## What does this PR do?\r\n\r\nThis PR implements asynchronous embedding generation to prevent blocking the message processing pipeline. Previously, generating embeddings for messages would block the runtime for 500ms+ per API call, delaying message responses. Now embeddings are queued and processed in the background by a dedicated service.\r\n\r\nKey changes:\r\n- Added `queueEmbeddingGeneration` method to `AgentRuntime` that emits events instead of blocking\r\n- Created `EmbeddingGenerationService` that listens for `EMBEDDING_QUEUED` events and processes them asynchronously\r\n- Implemented a priority queue system (high/normal/low) for embedding generation\r\n- Added comprehensive test coverage for both the runtime method and service\r\n\r\n## What kind of change is this?\r\n\r\n**Features** (non-breaking change which adds functionality) + **Improvements** (performance enhancement to existing features)\r\n\r\n# Documentation changes needed?\r\n\r\nMy changes require a change to the project documentation.\r\n- [ ] Need to document the new `queueEmbeddingGeneration` method in runtime API docs\r\n- [ ] Need to document the `EmbeddingGenerationService` in plugin documentation\r\n\r\n# Testing\r\n\r\n## Where should a reviewer start?\r\n\r\n1. Review `packages/core/src/runtime.ts` - see the new `queueEmbeddingGeneration` method (lines 2024-2055)\r\n2. Review `packages/plugin-bootstrap/src/services/embedding.ts` - the new service implementation\r\n3. Check the integration in `packages/plugin-bootstrap/src/index.ts` where we replaced `addEmbeddingToMemory` calls with `queueEmbeddingGeneration`\r\n4. Review test coverage in:\r\n   - `packages/plugin-bootstrap/src/__tests__/embedding-service.test.ts`\r\n   - `packages/core/src/__tests__/runtime-embedding.test.ts`\r\n\r\n## Detailed testing steps\r\n\r\n### Automated Tests\r\n```bash\r\n# Run core tests\r\ncd packages/core && bun run test\r\n\r\n# Run bootstrap plugin tests  \r\ncd packages/plugin-bootstrap && bun run test\r\n```\r\n\r\n### Manual Testing\r\n1. Start an agent with the bootstrap plugin\r\n2. Send a message to the agent\r\n3. Observe that:\r\n   - The agent responds quickly (no 500ms delay)\r\n   - Check logs for \"Queueing embedding generation\" and \"Processing embedding for memory\"\r\n   - Verify embeddings are eventually generated (check database or memory state)\r\n\r\n### Performance Verification\r\nThe tests include a specific test case demonstrating non-blocking behavior:\r\n- `\"should not block runtime while generating embeddings\"` test verifies that embedding generation happens asynchronously\r\n- Response times should be significantly faster (500ms+ improvement per message)\r\n\r\n## Before/After Performance\r\n\r\n**Before:** Message ‚Üí Create Memory ‚Üí Generate Embedding (500ms+) ‚Üí Process Actions ‚Üí Respond  \r\n**After:** Message ‚Üí Create Memory ‚Üí Queue Embedding (instant) ‚Üí Process Actions ‚Üí Respond | (Embedding generated in background)\r\n\r\n# Deploy Notes\r\n\r\nNo deployment changes required. The service is automatically registered when the bootstrap plugin is loaded.\r\n\r\n## Database changes\r\n\r\nNone - uses existing memory table structure",
      "repository": "elizaos/eliza",
      "createdAt": "2025-08-17T15:38:09Z",
      "mergedAt": null,
      "additions": 1736,
      "deletions": 34
    },
    {
      "id": "PR_kwDOMT5cIs6kFdxb",
      "title": "feat: Cross-Environment Logger Support.",
      "author": "ChristopherTrimboli",
      "number": 5797,
      "body": "## Logger Module Refactoring: Cross-Platform Support & Enhanced Architecture\r\n\r\n### Overview\r\nThis PR introduces a comprehensive refactoring of the logger module to support both browser and Node.js environments while maintaining backward compatibility and improving overall architecture.\r\n\r\n### Key Changes\r\n\r\n#### 1. **Cross-Platform Support** üåê\r\n- **Before**: Logger only worked in Node.js environments with direct `pino` imports\r\n- **After**: Universal logger that automatically detects and adapts to the runtime environment (browser/Node.js)\r\n- Added `BrowserLogger` implementation that mimics Pino's API using native `console` methods\r\n- Graceful fallback to `BrowserLogger` when Pino is unavailable\r\n\r\n#### 2. **Environment Detection System** üîç\r\n- Introduced cached environment detection via `createEnvironmentDetector()` factory\r\n- Eliminates redundant environment checks and improves performance\r\n- Provides utility methods: `isNode()`, `isBrowser()`, `hasProcess()`, `getProcessEnv()`\r\n\r\n#### 3. **Module Loading Strategy** üì¶\r\n- **Dual loading support**:\r\n  - `createLogger()` - Synchronous factory using `require()` (backward compatible)\r\n  - `createLoggerAsync()` - Asynchronous factory using dynamic `import()` (recommended for new code)\r\n- Module caching to prevent redundant imports\r\n- Better error handling for missing dependencies\r\n\r\n#### 4. **Improved Memory Management** üíæ\r\n- Replaced `InMemoryDestination` class with functional `createInMemoryDestination()` factory\r\n- Configurable max logs via `LOG_MAX_MEMORY_SIZE` env variable (default: 1000)\r\n- More efficient memory buffer management\r\n\r\n#### 5. **Enhanced Type Safety** üìù\r\n- Comprehensive TypeScript interfaces:\r\n  - `Logger`, `LogEntry`, `DestinationStream`\r\n  - `BrowserLoggerOptions`, `PinoOptions`\r\n  - `ExtendedPinoLogger` with custom ElizaOS methods\r\n- Better type inference and compile-time checks\r\n\r\n#### 6. **Architecture Improvements** üèóÔ∏è\r\n- **Modular design**: Clear separation between environment detection, browser logger, Node logger, and configuration\r\n- **Factory pattern**: Consistent use of factory functions for logger creation\r\n- **DRY principle**: Shared core logic via `createLoggerCore()` function\r\n- **Single Responsibility**: Each function has a focused purpose\r\n\r\n#### 7. **New Features** ‚ú®\r\n- Test support via `__forceType` binding to force browser/node behavior\r\n- `safeStringify()` for handling circular references\r\n- Better console method detection and fallback logic\r\n- Custom log levels fully integrated in browser logger\r\n\r\n### Breaking Changes\r\nNone - Full backward compatibility maintained:\r\n- ‚úÖ `createLogger()` still works as before\r\n- ‚úÖ `logger` default export unchanged\r\n- ‚úÖ `elizaLogger` alias preserved\r\n- ‚úÖ All custom log levels (`success`, `progress`, `log`) supported\r\n\r\n### Testing Considerations\r\n- New `envDetector` export for testing utilities\r\n- Ability to force logger type for unit tests\r\n- In-memory log buffer accessible for test assertions\r\n\r\n### Performance Impact\r\n- ‚ö° Cached environment detection reduces repeated checks\r\n- ‚ö° Module caching prevents redundant imports\r\n- ‚ö° Lazy loading of optional dependencies (pino-pretty)\r\n\r\n### Migration Path\r\nNo immediate action required. For optimal performance in new code:\r\n```typescript\r\n// Old (still works)\r\nimport { createLogger } from './logger';\r\nconst logger = createLogger();\r\n\r\n// New (recommended for async contexts)\r\nimport { createLoggerAsync } from './logger';\r\nconst logger = await createLoggerAsync();\r\n```\r\n\r\n### File Size\r\n- Old: ~300 lines\r\n- New: ~1000 lines (includes comprehensive browser support, better error handling, and extensive documentation)\r\n\r\n### Dependencies\r\n- No new required dependencies\r\n- `pino` and `pino-pretty` remain optional (graceful fallback if unavailable)\r\n\r\n---\r\n\r\nThis refactoring ensures ElizaOS logging works seamlessly across all JavaScript environments while maintaining the familiar Pino API and adding robust fallback mechanisms.",
      "repository": "elizaos/eliza",
      "createdAt": "2025-08-18T11:13:54Z",
      "mergedAt": "2025-08-19T00:43:26Z",
      "additions": 1468,
      "deletions": 153
    },
    {
      "id": "PR_kwDOMT5cIs6kEH2t",
      "title": "chore: 1.4.3",
      "author": "wtfsayo",
      "number": 5794,
      "body": "",
      "repository": "elizaos/eliza",
      "createdAt": "2025-08-18T09:06:51Z",
      "mergedAt": "2025-08-18T10:09:36Z",
      "additions": 1072,
      "deletions": 548
    },
    {
      "id": "PR_kwDOMT5cIs6joaWa",
      "title": "fix: correct comma placement when adding entries to registry index.json",
      "author": "yungalgo",
      "number": 5774,
      "body": "## Description\r\n\r\n### Problem\r\nThe `elizaos publish` command incorrectly handled commas when adding new plugin entries to the registry's `index.json` file:\r\n- Did not add a comma to the previously last entry\r\n- Incorrectly added a comma to the new entry when it became the last entry\r\n\r\nThis resulted in invalid JSON:\r\n```json\r\n\"@elizaos/plugin-action-bench\": \"github:elizaos-plugins/plugin-action-bench\"\r\n\"plugin-fal-ai\": \"github:yungalgo/plugin-fal-ai\",\r\n```\r\n\r\n### Solution\r\nModified the insertion logic in `publishToGitHub` function to:\r\n1. Detect if inserting before the closing `}` brace (last entry position)\r\n2. When inserting as last entry:\r\n   - Add comma to the previous entry if it doesn't have one\r\n   - Remove comma from the new entry\r\n3. When inserting in the middle: keep comma on new entry\r\n\r\n### Result\r\nProduces valid JSON:\r\n```json\r\n\"@elizaos/plugin-action-bench\": \"github:elizaos-plugins/plugin-action-bench\",\r\n\"plugin-fal-ai\": \"github:yungalgo/plugin-fal-ai\"\r\n```\r\n\r\n### Changes\r\n- `packages/cli/src/utils/publisher.ts`: Updated comma handling logic in lines 444-470\r\n\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n\n## Summary by CodeRabbit\n\n* **Bug Fixes**\n  * Resolved an issue where the last item added during publishing could produce invalid JSON due to misplaced commas.\n  * Improved handling of comma placement when inserting the final entry in the index to ensure consistently valid JSON.\n  * Prevents intermittent publish failures and parsing errors caused by trailing comma mistakes.\n\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->",
      "repository": "elizaos/eliza",
      "createdAt": "2025-08-14T07:58:40Z",
      "mergedAt": "2025-08-18T09:25:22Z",
      "additions": 479,
      "deletions": 4
    }
  ],
  "codeChanges": {
    "additions": 6128,
    "deletions": 1690,
    "files": 46,
    "commitCount": 95
  },
  "completedItems": [
    {
      "title": "fix: correct comma placement when adding entries to registry index.json",
      "prNumber": 5774,
      "type": "bugfix",
      "body": "## Description\r\n\r\n### Problem\r\nThe `elizaos publish` command incorrectly handled commas when adding new plugin entries to the registry's `index.json` file:\r\n- Did not add a comma to the previously last entry\r\n- Incorrectly added a comma to ",
      "files": [
        "packages/cli/src/utils/publisher.ts",
        "packages/cli/tests/unit/utils/publisher.test.ts"
      ]
    },
    {
      "title": "fix: fix: phala CLI argument handling and tee starter docker build",
      "prNumber": 5773,
      "type": "bugfix",
      "body": "## Description\r\n\r\nThis PR fixes two minor issues preventing the tee command from working as intended:\r\n\r\n### 1. Phala CLI Wrapper Argument Handling\r\n\r\nThe ElizaOS wrapper for the Phala CLI was not correctly capturing arguments, causing comm",
      "files": [
        "packages/cli/src/commands/tee/phala-wrapper.ts",
        "packages/project-tee-starter/src/index.ts",
        "packages/cli/src/commands/tee/index.ts",
        "packages/cli/tests/commands/create.test.ts",
        "packages/cli/tests/commands/tee.test.ts"
      ]
    },
    {
      "title": "fix: resolve test failures and enhance XML parsing reliability in CI environment",
      "prNumber": 5792,
      "type": "bugfix",
      "body": "## Problem\nMultiple GitHub Actions test failures were occurring across different packages, plus a critical plugin configuration bug:\n\n### Original Issues (https://github.com/elizaOS/eliza/actions/runs/17020769599/job/48249463787)\n- ‚ùå **10 e",
      "files": [
        "bun.lock",
        "packages/plugin-bootstrap/src/__tests__/attachments.test.ts",
        "packages/plugin-bootstrap/src/__tests__/evaluators.test.ts",
        "packages/plugin-bootstrap/src/__tests__/services.test.ts",
        "packages/plugin-bootstrap/src/__tests__/test-utils.ts",
        "packages/plugin-bootstrap/src/index.ts",
        "packages/project-tee-starter/src/__tests__/config.test.ts",
        "packages/project-tee-starter/src/plugin.ts"
      ]
    },
    {
      "title": "fix: resolve entity creation SQL parameter mismatch",
      "prNumber": 5791,
      "type": "bugfix",
      "body": "## Summary\n\nThis PR fixes a critical database error that was occurring during entity creation:\n\n```\n[ERROR] Error creating entity: Failed query: insert into \"entities\" values ($1, $2, default, default, default)\nparams: [only 2 parameters pr",
      "files": [
        "packages/core/src/types/environment.ts",
        "packages/plugin-sql/src/base.ts"
      ]
    },
    {
      "title": "feat: Cross-Environment Logger Support.",
      "prNumber": 5797,
      "type": "feature",
      "body": "## Logger Module Refactoring: Cross-Platform Support & Enhanced Architecture\r\n\r\n### Overview\r\nThis PR introduces a comprehensive refactoring of the logger module to support both browser and Node.js environments while maintaining backward co",
      "files": [
        "packages/core/src/__tests__/logger-browser-node.test.ts",
        "packages/core/src/logger.ts"
      ]
    },
    {
      "title": "fix: improve TypeScript types and error logging in publisher",
      "prNumber": 5796,
      "type": "bugfix",
      "body": "## Summary\n\nThis PR improves TypeScript type safety and error logging in the publisher module by:\n\n### Changes Made\n\n1. **Type Safety Improvements**:\n   - Replaced all  types with proper TypeScript types in \n   - Added  interface for better",
      "files": [
        "packages/cli/src/utils/publisher.ts",
        "packages/cli/tests/unit/utils/publisher.test.ts"
      ]
    },
    {
      "title": "fix: code formatting improvements and dependency updates",
      "prNumber": 5795,
      "type": "bugfix",
      "body": "## Summary\n\nThis PR contains code formatting improvements and dependency updates:\n\n### Changes Made:\n- **Test File Cleanup**: Removed unnecessary empty lines in `attachments.test.ts`\n- **Logger Formatting**: Fixed line wrapping for `logger.",
      "files": [
        "bun.lock",
        "packages/plugin-bootstrap/src/__tests__/attachments.test.ts",
        "packages/plugin-bootstrap/src/index.ts",
        "packages/project-tee-starter/src/plugin.ts"
      ]
    },
    {
      "title": "chore: 1.4.3",
      "prNumber": 5794,
      "type": "other",
      "body": "",
      "files": [
        ".github/workflows/release.yaml",
        "bun.lock",
        "lerna.json",
        "packages/api-client/package.json",
        "packages/cli/package.json",
        "packages/cli/src/commands/publish/index.ts",
        "packages/cli/src/commands/publish/types.ts",
        "packages/cli/src/commands/publish/utils/metadata.ts",
        "packages/cli/src/utils/github.ts",
        "packages/cli/src/utils/publisher.ts",
        "packages/cli/tests/unit/utils/publisher.test.ts",
        "packages/client/package.json",
        "packages/core/src/types/environment.ts",
        "packages/plugin-bootstrap/package.json",
        "packages/plugin-bootstrap/src/__tests__/attachments.test.ts",
        "packages/plugin-bootstrap/src/__tests__/evaluators.test.ts",
        "packages/plugin-bootstrap/src/__tests__/services.test.ts",
        "packages/plugin-bootstrap/src/__tests__/test-utils.ts",
        "packages/plugin-bootstrap/src/index.ts",
        "packages/plugin-dummy-services/package.json",
        "packages/plugin-sql/package.json",
        "packages/plugin-sql/src/base.ts",
        "packages/project-starter/src/__tests__/config.test.ts",
        "packages/project-starter/src/__tests__/error-handling.test.ts",
        "packages/project-starter/src/__tests__/events.test.ts",
        "packages/project-tee-starter/src/__tests__/config.test.ts",
        "packages/project-tee-starter/src/plugin.ts",
        "packages/server/package.json",
        "packages/server/src/index.ts",
        "packages/test-utils/package.json"
      ]
    },
    {
      "title": "feat: Sessions API ++",
      "prNumber": 5799,
      "type": "feature",
      "body": "## Enhanced Session Management with Advanced Timeout Configuration and Lifecycle Control\r\n\r\n### Overview\r\nThis PR significantly enhances the sessions API with comprehensive timeout management, auto-renewal capabilities, and robust error han",
      "files": [
        "packages/server/src/api/messaging/__tests__/sessions.test.ts",
        "packages/server/src/api/messaging/channels.ts",
        "packages/server/src/api/messaging/errors/SessionErrors.ts",
        "packages/server/src/api/messaging/sessions.ts",
        "packages/server/src/index.ts",
        "packages/server/src/types/sessions.ts"
      ]
    },
    {
      "title": "feat: getServiceLoadPromise",
      "prNumber": 5801,
      "type": "feature",
      "body": "# Risks\r\n\r\nLow\r\n\r\n# Background\r\n\r\n## What does this PR do?\r\n\r\n- add getServiceLoadPromise interface to runtime\r\n- fix component queries in plugin-sql (was too easy for dates to get invalid, this is a more flexible set up, allowing the inten",
      "files": [
        "packages/core/src/runtime.ts",
        "packages/core/src/settings.ts",
        "packages/core/src/types/runtime.ts",
        "packages/plugin-bootstrap/src/index.ts",
        "packages/plugin-sql/src/base.ts",
        "packages/test-utils/src/mocks/runtime.ts"
      ]
    }
  ],
  "topContributors": [
    {
      "username": "wtfsayo",
      "avatarUrl": "https://avatars.githubusercontent.com/u/82053242?u=98209a1f10456f42d4d2fa71db4d5bf4a672cbc3&v=4",
      "totalScore": 252.116602767093,
      "prScore": 231.916602767093,
      "issueScore": 0,
      "reviewScore": 20,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "0xbbjoker",
      "avatarUrl": "https://avatars.githubusercontent.com/u/54844437?u=90fe1762420de6ad493a1c1582f1f70c0d87d8e2&v=4",
      "totalScore": 89.35202526023288,
      "prScore": 74.15202526023288,
      "issueScore": 0,
      "reviewScore": 15,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "ChristopherTrimboli",
      "avatarUrl": "https://avatars.githubusercontent.com/u/27584221?u=0d816ce1dcdea8f925aba18bb710153d4a87a719&v=4",
      "totalScore": 61.073019117260884,
      "prScore": 45.63501911726088,
      "issueScore": 0,
      "reviewScore": 15,
      "commentScore": 0.43799999999999994,
      "summary": null
    },
    {
      "username": "odilitime",
      "avatarUrl": "https://avatars.githubusercontent.com/u/16395496?u=c9bac48e632aae594a0d85aaf9e9c9c69b674d8b&v=4",
      "totalScore": 35.48334355740107,
      "prScore": 35.28334355740107,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": null
    },
    {
      "username": "madjin",
      "avatarUrl": "https://avatars.githubusercontent.com/u/32600939?u=cdcf89f44c7a50906c7a80d889efa85023af2049&v=4",
      "totalScore": 2,
      "prScore": 0,
      "issueScore": 2,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "linear",
      "avatarUrl": "https://avatars.githubusercontent.com/in/20150?v=4",
      "totalScore": 2,
      "prScore": 0,
      "issueScore": 2,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "0xRabbidfly",
      "avatarUrl": "https://avatars.githubusercontent.com/u/93952856?v=4",
      "totalScore": 2,
      "prScore": 0,
      "issueScore": 2,
      "reviewScore": 0,
      "commentScore": 0,
      "summary": null
    },
    {
      "username": "yungalgo",
      "avatarUrl": "https://avatars.githubusercontent.com/u/113615973?u=92e0f29f7e2fbb8ce46ed13c51f692ca803de02d&v=4",
      "totalScore": 0.2,
      "prScore": 0,
      "issueScore": 0,
      "reviewScore": 0,
      "commentScore": 0.2,
      "summary": null
    }
  ],
  "newPRs": 11,
  "mergedPRs": 10,
  "newIssues": 1,
  "closedIssues": 13,
  "activeContributors": 7
}